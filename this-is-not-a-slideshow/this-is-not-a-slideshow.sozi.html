


<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>This is not a slideshow</title>
        <style>
            body {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                overflow: hidden;
            }

            svg {
                display: none;
                filter: blur(0);
            }

            .sozi-frame-list {
                position: absolute;
                top: 0;
                right: 0;
                width: 33%;
                height: 100%;
                margin: 0;
                padding: 0.5em 1em 0.5em 0.25em;
                overflow-y: auto;

                font-family: "Droid Sans", Helvetica, Arial, sans-serif;
                font-size: 12pt;

                color: rgb(240, 255, 255);
                background-color: rgba(34, 34, 34, 0.9);
            }

            .sozi-frame-list ol {
                margin: 0;
                overflow-x: hidden;
            }

            .sozi-frame-list li {
                white-space: nowrap;
            }

            li.sozi-title-level-1:before { content: '. . ';             color: rgb(100, 100, 100); }
            li.sozi-title-level-2:before { content: '. . . . ';         color: rgb(100, 100, 100); }
            li.sozi-title-level-3:before { content: '. . . . . . ';     color: rgb(100, 100, 100); }
            li.sozi-title-level-4:before { content: '. . . . . . . . '; color: rgb(100, 100, 100); }

            .sozi-frame-list a {
                color: inherit;
                text-decoration: none;
            }

            .sozi-frame-list a:hover {
                color: rgb(0, 204, 255);
                text-decoration: underline;
            }

            .sozi-frame-list a.current {
                color: rgb(255, 170, 68);
            }

            .sozi-frame-number {
                position: absolute;
                top: 0;
                left: 1em;
                text-align: center;
                padding: 0.3em 0.6em;

                cursor: pointer;

                font-family: "Droid Sans", Helvetica, Arial, sans-serif;
                font-size: 12pt;
                color: rgb(240, 255, 255);
                background-color: rgba(34, 34, 34, 0.9);
            }

            .sozi-blank-screen {
                background: black;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 100%;
                visibility: visible;
                z-index: 999;
                transition: opacity 0.5s, visibility 0.5s;
            }

            svg a {
                cursor: pointer;
            }

            @keyframes spinner {
                to { transform: rotate(360deg); }
            }

            .spinner:before {
                content: '';
                box-sizing: border-box;
                position: absolute;
                top: 50%;
                left: 50%;
                width: 40px;
                height: 40px;
                margin-top: -20px;
                margin-left: -20px;
                border-radius: 50%;
                border: 4px solid #ccc;
                border-top-color: #333;
                animation: spinner .8s linear infinite;
            }
        </style>
    </head>
    <body>
        <svg xmlns:ns1="http://sozi.baierouge.fr" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="1062.9921" height="1062.9921" id="svg2" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="this-is-not-a-slideshow.svg" style="height: 100%; width: 100%;"><style xmlns="http://www.w3.org/1999/xhtml">svg {
            background: rgba(255, 255, 255, 0.0);
        }</style><title id="title3391">This is not a slideshow</title><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.49497475" inkscape:cx="448.15182" inkscape:cy="342.32802" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="true" inkscape:window-width="1920" inkscape:window-height="1017" inkscape:window-x="0" inkscape:window-y="30" inkscape:window-maximized="1" units="cm">
    <inkscape:grid id="grid3763" type="xygrid" empspacing="5" visible="true" enabled="true" snapvisiblegridlinesonly="true"/>
  </sodipodi:namedview><defs id="defs4">
    <inkscape:path-effect tgtlength_rdm="0.3;1" tgtlength="100" tgtscale="10" tgt_places_rdmness="1;1" nbtangents="5" tremble_frequency="1" tremble_size="5;1" parallel_offset="5;1" ends_tolerance="0.1;1" strokeoverlap_rdm="0.3;1" strokeoverlap="0.3" strokelength_rdm="0.3;1" strokelength="100" nbiter_approxstrokes="5" is_visible="true" id="path-effect3765" effect="sketch"/>
    <inkscape:path-effect bendpath4="m 167.14286,514.73163 0,367.83084" bendpath3="m 167.14286,882.56247 157.07266,0" bendpath2="m 324.21552,514.73163 0,367.83084" bendpath1="m 167.14286,514.73163 157.07266,0" xx="true" yy="true" is_visible="true" id="path-effect3767" effect="envelope"/>
    <inkscape:path-effect phi="5" teeth="10" is_visible="true" id="path-effect3769" effect="gears"/>
    <inkscape:path-effect crossing_points_vector="" switcher_size="15" add_other_stroke_width="true" add_stroke_width="true" prop_to_stroke_width="true" interruption_width="3" is_visible="true" id="path-effect3771" effect="knot"/>
    <inkscape:path-effect nr_y="5" nr_x="5" is_visible="true" id="path-effect3773" effect="construct_grid"/>
    <inkscape:path-effect is_visible="true" id="path-effect3775" effect="spiro"/>
    <inkscape:path-effect maxComplexity="1000" drawall="true" nbgenerations="1" similar_only="false" generator="m 167.14286,882.56247 52.35755,0 m 52.35756,0 52.35755,0" ref_path="m 167.14286,698.64705 157.07266,0" is_visible="true" id="path-effect3777" effect="vonkoch"/>
    <inkscape:path-effect vertical="false" scale_y_rel="false" prop_scale="1" bendpath="m 167.14286,698.64705 157.07266,0" is_visible="true" id="path-effect3779" effect="bend_path"/>
  </defs><metadata id="metadata7">
    <rdf:RDF>
      <cc:Work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
        <dc:title>This is not a slideshow</dc:title>
        <dc:creator>
          <cc:Agent>
            <dc:title>Guillaume Savaton</dc:title>
          </cc:Agent>
        </dc:creator>
        <cc:license rdf:resource="http://creativecommons.org/licenses/by-sa/3.0/"/>
      </cc:Work>
      <cc:License rdf:about="http://creativecommons.org/licenses/by-sa/3.0/">
        <cc:permits rdf:resource="http://creativecommons.org/ns#Reproduction"/>
        <cc:permits rdf:resource="http://creativecommons.org/ns#Distribution"/>
        <cc:requires rdf:resource="http://creativecommons.org/ns#Notice"/>
        <cc:requires rdf:resource="http://creativecommons.org/ns#Attribution"/>
        <cc:permits rdf:resource="http://creativecommons.org/ns#DerivativeWorks"/>
        <cc:requires rdf:resource="http://creativecommons.org/ns#ShareAlike"/>
      </cc:License>
    </rdf:RDF>
  </metadata><g id="layer1" inkscape:groupmode="layer" inkscape:label="Calque 1" transform="translate(0,10.631225)">
    <g style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:33.79266739px;line-height:125%;font-family:Iwona;-inkscape-font-specification:Iwona;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none" id="text2985">
      <path d="m 288.83945,527.42772 1.33164,-0.80192 -9.58818,-15.92184 -1.33164,0.80192 4.07933,6.77402 -18.93251,11.40122 1.42951,2.3738 18.93251,-11.40122 4.07934,6.77402 z m -11.92442,23.03864 9.40835,-5.66575 c 2.11327,-1.27261 2.93184,-3.97459 1.67666,-6.05891 -1.04598,-1.73692 -2.95419,-2.67849 -4.91967,-3.1911 l 9.14782,-5.50884 -1.35977,-2.25801 -20.26416,12.20314 1.35978,2.25801 10.21892,-6.15387 c 1.57699,0.39153 3.09079,1.13669 3.91014,2.49728 0.81936,1.3606 0.26005,3.11751 -1.12949,3.9543 l -9.40836,5.66574 1.35978,2.25801 z" style="stroke:none" id="path3785"/>
      <path d="m 284.34201,560.48574 0.86838,-0.52313 c -0.79445,-0.27097 -1.55438,-0.68109 -1.99033,-1.40474 -0.64519,-1.071 0.56426,-2.07576 1.80893,-2.82559 l 9.40744,-5.66727 -1.36015,-2.25779 -9.40744,5.66728 c -1.93937,1.16833 -3.45432,3.1067 -2.42549,4.81451 0.66264,1.09994 1.84037,1.81068 3.09866,2.19673 z m 14.78436,-12.85157 c 0.78154,-0.47082 1.03472,-1.49126 0.5639,-2.2728 -0.47082,-0.78154 -1.49126,-1.03472 -2.2728,-0.5639 -0.78154,0.47082 -1.03472,1.49126 -0.5639,2.2728 0.47082,0.78154 1.49126,1.03472 2.2728,0.5639 z" style="stroke:none" id="path3787"/>
      <path d="m 294.07782,570.57674 c 2.28806,-1.37539 2.01309,-4.52206 1.16473,-7.2452 -0.48812,-1.59913 -0.81418,-3.45339 0.54706,-4.27166 1.2454,-0.74863 2.82239,0.0383 3.65807,1.42847 0.92273,1.53502 1.38205,3.3486 1.30817,5.12785 l 1.21643,-0.73122 c 0.0739,-1.77925 -0.38544,-3.59283 -1.30817,-5.12785 -1.51466,-2.51976 -4.44248,-3.91405 -6.78846,-2.50384 -2.11428,1.27092 -1.6888,4.20884 -0.89853,6.76976 0.54621,1.76135 0.6928,3.84178 -0.7843,4.72969 -1.36124,0.81826 -3.03684,-0.0671 -3.92475,-1.54416 -1.07941,-1.79568 -1.68957,-3.7946 -1.74341,-5.85192 l -1.21644,0.73122 c 0.0539,2.05732 0.664,4.05623 1.74342,5.85192 1.5669,2.60664 4.59332,4.09937 7.02618,2.63694 z" style="stroke:none" id="path3789"/>
      <path d="m 302.54873,590.86023 0.87057,-0.51948 c -0.7933,-0.27431 -1.5515,-0.68762 -1.9844,-1.41309 -0.64069,-1.07371 0.57297,-2.07337 1.82079,-2.81796 l 9.43117,-5.62768 -1.35064,-2.26349 -9.43118,5.62769 c -1.94427,1.16017 -3.46735,3.09215 -2.4457,4.80427 0.658,1.10272 1.83274,1.8184 3.08939,2.20974 z m 14.83825,-12.78931 c 0.78352,-0.46753 1.04098,-1.4869 0.57345,-2.27042 -0.46753,-0.78351 -1.4869,-1.04098 -2.27041,-0.57345 -0.78351,0.46754 -1.04098,1.4869 -0.57345,2.27042 0.46753,0.78351 1.4869,1.04098 2.27041,0.57345 z" style="stroke:none" id="path3791"/>
      <path d="m 312.22858,601.00222 c 2.29574,-1.36252 2.03845,-4.51069 1.2054,-7.23855 -0.47913,-1.60184 -0.79478,-3.45791 0.57104,-4.26851 1.24959,-0.74163 2.82213,0.0541 3.64999,1.44898 0.91409,1.54018 1.36322,3.35632 1.27935,5.13512 l 1.22052,-0.72437 c 0.0839,-1.77881 -0.36526,-3.59494 -1.27935,-5.13512 -1.50049,-2.52823 -4.42043,-3.93894 -6.77429,-2.54193 -2.12138,1.25903 -1.71242,4.19929 -0.93654,6.76461 0.53631,1.76439 0.67122,3.84561 -0.81085,4.7252 -1.36582,0.81061 -3.03641,-0.0841 -3.91601,-1.56617 -1.06932,-1.80172 -1.66824,-3.80403 -1.71053,-5.86162 l -1.22052,0.72438 c 0.0423,2.05759 0.64121,4.0599 1.71053,5.86162 1.55223,2.6154 4.57022,4.1251 7.01126,2.67636 z" style="stroke:none" id="path3793"/>
      <path d="m 322.56735,627.15739 9.4835,-5.53905 c 2.13014,-1.24415 2.98488,-3.93491 1.75777,-6.03588 -1.0226,-1.7508 -2.91801,-2.71787 -4.87643,-3.25679 l 1.92588,-1.12485 -1.32937,-2.27604 -13.131,7.66945 1.32937,2.27604 10.30054,-6.01626 c 1.57159,0.41265 3.07527,1.17804 3.8763,2.5495 0.80103,1.37146 0.21821,3.12072 -1.18243,3.93879 l -9.4835,5.53905 1.32937,2.27604 z" style="stroke:none" id="path3795"/>
      <path d="m 337.90484,638.50461 c 4.47901,-2.58269 5.73166,-5.95755 3.62162,-9.61686 -2.12693,-3.6886 -5.6753,-4.29508 -10.15431,-1.71238 -4.479,2.58269 -5.73165,5.95754 -3.60473,9.64614 2.11005,3.65931 5.65842,4.26579 10.13742,1.6831 z m -1.48547,-2.57616 c -3.65931,2.11004 -6.27455,2.17475 -7.42242,0.18408 -1.16474,-2.01994 0.20136,-4.25096 3.86067,-6.361 3.65932,-2.11005 6.27456,-2.17475 7.43931,-0.15481 1.14786,1.99067 -0.21824,4.22169 -3.87756,6.33173 z" style="fill:#ff6600;stroke:none" id="path3797"/>
      <path d="m 338.13832,651.87858 0.88086,-0.50183 c -0.73744,-0.20215 -1.43698,-0.54256 -1.82172,-1.21789 -0.6022,-1.05703 0.74435,-1.90196 1.97755,-2.60453 l 8.30942,-4.734 1.60588,2.81875 1.2332,-0.70258 -1.60588,-2.81874 4.40429,-2.50918 -0.78621,-1.38001 c -2.34896,1.33823 -5.32058,1.24217 -6.54172,-0.90125 l -1.08639,0.61894 1.47206,2.58384 -8.30942,4.734 c -1.93789,1.10404 -3.61258,2.87487 -2.65909,4.54849 0.61894,1.08639 1.74147,1.69142 2.92717,2.06599 z" style="stroke:none" id="path3799"/>
      <path d="m 350.24915,675.94593 8.27469,-4.58888 c 2.77794,-1.54055 4.3689,-4.66404 2.94307,-7.2351 -1.04889,-1.89136 -2.68238,-3.30396 -4.57216,-4.34257 l -0.91613,0.50806 c 1.47631,0.92014 2.7686,2.13554 3.62082,3.67227 1.01611,1.83225 -0.34436,3.97781 -2.35393,5.09225 l -0.53194,0.295 c -0.13677,-1.43116 -0.52958,-2.83625 -1.21791,-4.07746 -1.75361,-3.16211 -4.49641,-4.69371 -7.48121,-3.03843 -2.83704,1.57333 -3.2561,4.51061 -1.60082,7.49542 0.83583,1.50717 2.28581,2.5192 3.88705,3.17685 l -1.32986,0.7375 1.27833,2.30509 z m 1.29273,-3.73092 c -1.37824,-0.39491 -2.72344,-1.07863 -3.42816,-2.34939 -1.09805,-1.98001 -0.60751,-3.95227 1.34295,-5.03393 1.80271,-0.99972 4.01112,-0.29237 5.01084,1.51033 0.62277,1.12299 0.95002,2.40988 1.00485,3.69327 l -3.93048,2.17972 z" style="stroke:none" id="path3801"/>
      <path d="m 366.88288,697.62136 c 2.35452,-1.25822 2.23864,-4.41476 1.52873,-7.17723 -0.40683,-1.62171 -0.63894,-3.49006 0.76185,-4.23862 1.28158,-0.68485 2.81687,0.18059 3.58135,1.61118 0.84412,1.57962 1.21137,3.41406 1.04783,5.18732 l 1.25177,-0.66893 c 0.16354,-1.77325 -0.20371,-3.6077 -1.04783,-5.18731 -1.38563,-2.59296 -4.23938,-4.13317 -6.65351,-2.8431 -2.1757,1.16265 -1.89897,4.11829 -1.23889,6.71581 0.45666,1.78667 0.49812,3.87184 -1.02189,4.6841 -1.40079,0.74856 -3.02959,-0.22016 -3.84186,-1.74017 -0.98745,-1.84785 -1.496,-3.875 -1.44599,-5.93242 l -1.25177,0.66893 c -0.05,2.05742 0.45853,4.08456 1.44599,5.93241 1.43341,2.68237 4.38067,4.32587 6.88422,2.98803 z" style="stroke:none" id="path3803"/>
      <path d="m 369.03806,708.49963 0.89804,-0.47039 c -0.77687,-0.31789 -1.51097,-0.77262 -1.90296,-1.52099 -0.58014,-1.10759 0.6871,-2.03839 1.9743,-2.71262 l 17.21253,-9.01576 -1.22301,-2.33492 -17.21253,9.01577 c -2.00563,1.05053 -3.63353,2.89505 -2.70844,4.6612 0.59583,1.13753 1.72906,1.91727 2.96207,2.37771 z" style="stroke:none" id="path3805"/>
      <path d="m 373.40819,716.98217 0.90147,-0.46379 c -0.77452,-0.32358 -1.50527,-0.78368 -1.89176,-1.53491 -0.57201,-1.11181 0.70203,-2.0333 1.99414,-2.69806 l 9.76594,-5.02438 -1.20586,-2.34383 -9.76593,5.02438 c -2.01329,1.0358 -3.65467,2.86833 -2.74255,4.64122 0.58747,1.14187 1.71494,1.9299 2.94455,2.39937 z m 15.61203,-11.83235 c 0.81132,-0.41741 1.13229,-1.4186 0.71488,-2.22993 -0.41741,-0.81132 -1.4186,-1.13229 -2.22992,-0.71488 -0.81133,0.41741 -1.13229,1.4186 -0.71488,2.22993 0.41741,0.81132 1.4186,1.13229 2.22992,0.71488 z" style="stroke:none" id="path3807"/>
      <path d="m 379.36959,731.4796 21.15978,-10.57433 -1.17828,-2.3578 -8.07095,4.03335 c -0.0753,-1.43571 -0.40743,-2.85636 -1.04189,-4.12594 -1.88828,-3.77854 -5.83258,-4.11184 -9.91339,-2.07251 -4.02036,2.00913 -6.34834,5.06137 -4.52049,8.71899 0.77042,1.54164 2.17566,2.61493 3.74721,3.34066 l -1.36027,0.67978 1.17828,2.3578 z m 1.45158,-3.67204 c -1.36003,-0.45366 -2.67467,-1.19445 -3.32424,-2.49427 -1.37466,-2.75077 0.9833,-4.68468 4.15727,-6.27083 2.84146,-1.41998 6.27213,-2.03887 7.51084,0.43984 0.57404,1.14868 0.84579,2.44841 0.84552,3.73298 l -9.18939,4.59228 z" style="stroke:none" id="path3809"/>
      <path d="m 393.57196,744.22074 0.30485,-0.14581 c 4.29839,-2.05593 6.04124,-5.7739 4.34983,-9.31016 -1.70598,-3.56675 -5.69432,-4.54348 -9.9927,-2.48755 -4.29839,2.05593 -6.04124,5.7739 -4.33526,9.34065 0.72905,1.52425 1.93129,2.78472 3.41318,3.61176 l 1.28037,-0.61241 c -1.59986,-0.99536 -2.48928,-1.9934 -3.29124,-3.67008 -1.23939,-2.59123 0.9237,-4.41248 3.91123,-5.84142 l 4.35974,9.11502 z m -0.003,-3.29509 -3.0766,-6.43234 c 2.4388,-1.16648 5.40385,-1.31106 6.45368,0.88386 1.03526,2.16444 -0.93827,4.382 -3.37708,5.54848 z" style="stroke:none" id="path3811"/>
      <path d="m 397.05995,758.90686 c 2.42976,-1.10595 2.51483,-4.26347 1.982,-7.06549 -0.30289,-1.6443 -0.41573,-3.52363 1.02982,-4.1816 1.32253,-0.60198 2.79969,0.35932 3.47166,1.83563 0.74197,1.6301 0.99183,3.48418 0.71587,5.24345 l 1.29177,-0.58798 c 0.27597,-1.75927 0.0261,-3.61335 -0.71587,-5.24344 -1.21795,-2.67581 -3.968,-4.39436 -6.45927,-3.26041 -2.24522,1.02196 -2.15699,3.98921 -1.66341,6.62345 0.34214,1.81209 0.25093,3.89568 -1.31765,4.60965 -1.44556,0.65797 -3.00947,-0.41236 -3.72344,-1.98094 -0.86796,-1.9069 -1.24658,-3.96228 -1.06586,-6.01235 l -1.29177,0.58797 c -0.18072,2.05008 0.1979,4.10546 1.06586,6.01236 1.25995,2.76808 4.09675,4.59566 6.68029,3.4197 z" style="stroke:none" id="path3813"/>
      <path d="m 399.64676,775.83027 10.10249,-4.30785 c 2.26917,-0.96761 3.45414,-3.53015 2.49979,-5.76824 -0.7953,-1.86507 -2.55468,-3.06189 -4.4302,-3.84182 l 9.82273,-4.18855 -1.03388,-2.4246 -21.75921,9.27844 1.03388,2.4246 10.97286,-4.67899 c 1.50755,0.60621 2.90354,1.55388 3.52652,3.01486 0.62298,1.46097 -0.17431,3.12347 -1.66637,3.7597 l -10.1025,4.30785 1.03389,2.4246 z" style="stroke:none" id="path3815"/>
      <path d="m 413.15588,789.35028 c 4.81974,-1.87134 6.57115,-5.01639 5.04228,-8.95408 -1.54111,-3.9692 -4.95595,-5.10836 -9.77568,-3.23701 -4.81974,1.87135 -6.57115,5.0164 -5.03004,8.98559 1.52888,3.93769 4.94371,5.07685 9.76344,3.2055 z m -1.07633,-2.77213 c -3.93769,1.52888 -6.53234,1.19503 -7.36405,-0.94707 -0.84394,-2.17361 0.84562,-4.17088 4.78331,-5.69975 3.93769,-1.52888 6.53234,-1.19504 7.37628,0.97857 0.83171,2.1421 -0.85784,4.13937 -4.79554,5.66825 z" style="fill:#ff6600;stroke:none" id="path3817"/>
      <path d="m 428.20164,810.00869 -0.46453,-1.41245 -12.9627,0.0656 10.52391,-7.48093 -0.57011,-1.73346 -12.9627,0.0656 10.51335,-7.51304 -0.7707,-2.34338 -12.96745,9.24505 0.66512,2.02237 12.4284,-0.0677 -10.08462,7.19417 0.66512,2.02237 15.98691,-0.0641 z" style="fill:#00aad4;stroke:none" id="path3819"/>
    </g>
    <rect ry="0" rx="0" y="-6.8015165" x="573.93201" height="65" width="80" id="rect2993" style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3.99999997, 1.99999997, 1, 1.99999997;stroke-dashoffset:0" transform="matrix(0.503761,0.86384307,-0.86384307,0.503761,0,0)"/>
    <rect style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4.00000006, 2.00000003, 1.00000003, 2.00000003;stroke-dashoffset:0" id="rect3765" width="40" height="65" x="646.70123" y="-3.0602958" rx="0" ry="0" transform="matrix(0.49851537,0.86688086,-0.86688086,0.49851537,0,0)"/>
    <rect ry="0" rx="0" y="2.8453968" x="680.45374" height="65" width="60" id="rect3767" style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3.99999992, 1.99999997, 0.99999998, 1.99999997;stroke-dashoffset:0" transform="matrix(0.50891928,0.86081425,-0.86081425,0.50891928,0,0)"/>
    <rect style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3.99999994, 1.99999997, 1, 1.99999997;stroke-dashoffset:0" id="rect3769" width="35" height="65" x="739.17932" y="-24.288458" rx="0" ry="0" transform="matrix(0.47623607,0.87931747,-0.87931747,0.47623607,0,0)"/>
    <rect ry="0" rx="0" y="-58.164028" x="766.0672" height="67.478905" width="166.10191" id="rect3771" style="fill:none;stroke:#008080;stroke-width:0.99999994;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4.00000011, 2.00000005, 1.00000002, 2.00000005;stroke-dashoffset:0" transform="matrix(0.43736046,0.89928629,-0.89928629,0.43736046,0,0)"/>
    <g transform="matrix(0.82918963,-0.55896741,0.55896741,0.82918963,0,0)" inkscape:transform-center-x="4.4962412" inkscape:transform-center-y="-4.4554741" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:45px;line-height:125%;font-family:Iwona;-inkscape-font-specification:Iwona;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none" id="text2989">
      <path d="m 244.27032,843.14336 0,-2.07 -24.75,0 0,2.07 10.53,0 0,29.43 3.69,0 0,-29.43 10.53,0 z m 18.09,29.43 0,-14.625 c 0,-3.285 -2.52,-6.075 -5.76,-6.075 -2.7,0 -5.085,1.53 -7.02,3.42 l 0,-14.22 -3.51,0 0,31.5 3.51,0 0,-15.885 c 1.53,-1.53 3.42,-2.745 5.535,-2.745 2.115,0 3.735,1.845 3.735,4.005 l 0,14.625 3.51,0 z" style="" id="path3778"/>
      <path d="m 278.88305,870.99836 0,-1.35 c -0.855,0.72 -1.845,1.305 -2.97,1.305 -1.665,0 -1.98,-2.07 -1.98,-4.005 l 0,-14.625 -3.51,0 0,14.625 c 0,3.015 1.17,6.075 3.825,6.075 1.71,0 3.33,-0.855 4.635,-2.025 z m -4.5,-25.695 c 0,-1.215 -0.99,-2.205 -2.205,-2.205 -1.215,0 -2.205,0.99 -2.205,2.205 0,1.215 0.99,2.205 2.205,2.205 1.215,0 2.205,-0.99 2.205,-2.205 z" style="" id="path3780"/>
      <path d="m 297.07219,866.81336 c 0,-3.555 -3.78,-5.4 -7.47,-6.3 -2.16,-0.54 -4.5,-1.44 -4.5,-3.555 0,-1.935 1.98,-3.195 4.14,-3.195 2.385,0 4.77,0.72 6.75,2.025 l 0,-1.89 c -1.98,-1.305 -4.365,-2.025 -6.75,-2.025 -3.915,0 -7.515,2.385 -7.515,6.03 0,3.285 3.645,4.815 7.11,5.67 2.385,0.585 4.86,1.845 4.86,4.14 0,2.115 -2.16,3.42 -4.455,3.42 -2.79,0 -5.49,-0.675 -7.875,-2.025 l 0,1.89 c 2.385,1.35 5.085,2.025 7.875,2.025 4.05,0 7.83,-2.43 7.83,-6.21 z" style="" id="path3782"/>
    </g>
    <rect transform="matrix(0.82734714,-0.56169094,0.56169094,0.82734714,0,0)" style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3.99999978, 1.9999999, 0.99999996, 1.9999999;stroke-dashoffset:0" id="rect3773" width="194.01286" height="113.17416" x="175.06706" y="809.41803" rx="0" ry="0"/>
    <rect style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3.99999997, 1.99999998, 1, 1.99999998;stroke-dashoffset:0" id="rect3787" width="1060.0001" height="1020" x="-6.1035153e-05" y="12.360841" rx="0" ry="0"/>
    <rect style="fill:none;stroke:#008080;stroke-width:1;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4.00000001, 2, 1, 2;stroke-dashoffset:0" id="rect4308" width="460" height="155" x="527.84229" y="-26.204351" rx="0" ry="0" transform="matrix(0.48292513,0.87566164,-0.87566164,0.48292513,0,0)"/>
    <g transform="matrix(2.3185398,0,0,2.3185398,-683.9555,-1044.6717)" id="layer1-8" inkscape:label="Calque 1">
      <path inkscape:connector-curvature="0" id="path3007" d="m 664.99729,654.7941 c -0.97165,-3.16732 -3.59682,-16.13813 -5.08854,-25.14219 -2.99137,-18.05589 -4.38349,-32.97732 -5.10094,-54.67451 -0.28238,-8.53959 -2.51004,-11.24649 -1.8298,-11.24649 2.82778,0 19.15374,7.91109 25.29911,11.99238 12.37658,8.21958 18.92606,18.74124 19.57856,31.45273 0.2441,4.75551 0.13785,5.72066 -1.02871,9.34391 -2.68567,8.34152 -7.54548,18.74304 -17.97061,29.1591 -3.61501,3.61186 -9.34922,9.59398 -10.78264,10.78265 -2.2368,1.85487 -2.83986,-0.89642 -3.07643,-1.66758 z" style="fill:#ffcc00;fill-opacity:1;stroke:#ffcc00;stroke-width:0.99921262;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" sodipodi:nodetypes="csssssssscc"/>
      <path sodipodi:nodetypes="ssssssss" inkscape:connector-curvature="0" id="path3792" d="m 392.34969,654.33945 c -21.01871,-49.20118 -27.20832,-97.82124 -15.39989,-120.96768 6.89705,-13.51934 20.88367,-19.67638 38.80994,-17.08451 8.17657,1.18221 23.92626,4.34053 25.37483,5.7121 0.38519,0.36471 -3.38434,3.52038 -5.32117,6.57609 -4.77582,7.53471 -13.59934,25.79204 -17.81905,36.87057 -11.0807,29.09149 -18.25056,66.19899 -20.59074,101.76543 -0.20638,3.13669 -0.45967,-2.11765 -5.05392,-12.872 z" style="fill:#ff6600;fill-opacity:1;stroke:#ff6600;stroke-width:2;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0"/>
      <path inkscape:connector-curvature="0" id="path3800" d="m 659.6783,501.37697 c -2.32457,0.18254 -4.63554,0.7783 -6.73004,1.81127 -1.19619,0.62935 -2.55003,1.56007 -2.64453,3.03612 -0.0533,2.06356 1.38811,3.95547 3.28485,4.67629 2.24586,0.88314 4.80077,0.66421 7.04242,-0.11235 3.30401,-1.2278 5.79168,-4.03779 7.27879,-7.16473 0.17924,-0.50913 0.93604,-1.39354 -0.0862,-1.2817 -2.66099,-0.42607 -5.33029,-0.91746 -8.03145,-0.96818 l -0.11381,0.003 z" style="fill:#ddafe9;fill-opacity:1;stroke:#ddafe9;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"/>
      <path sodipodi:nodetypes="csssssccc" inkscape:connector-curvature="0" id="path3794" d="m 578.80989,789.72063 c -23.32273,-8.15737 -33.49713,-20.50991 -31.22416,-32.62588 1.49377,-7.96247 12.51465,-20.8437 29.78472,-34.67555 9.8613,-7.89806 35.84172,-26.23573 40.58446,-29.12029 1.14694,-0.69758 0.1926,2.99527 -0.37919,10.86886 -2.19579,30.23646 -6.65443,51.981 -15.23634,71.45272 -3.72069,8.44198 -8.50455,18.89224 -9.62408,18.76319 -0.35877,-0.0413 -6.18317,-1.67097 -9.88755,-2.96662 z" style="fill:#00ccff;fill-opacity:1;stroke:#00ccff;stroke-opacity:1"/>
      <path sodipodi:nodetypes="zcsscsz" inkscape:connector-curvature="0" id="path2985" d="m 411.31698,699.86309 c -49.8102,-78.02369 -78.30419,-243.65316 58.48655,-165.26508 1.43718,0.61504 -2.0856,0.67762 -2.72898,0.30382 -135.87891,-78.94554 -100.53198,90.20404 -56.68196,158.17157 28.57143,44.28572 168.57142,262.85714 -94.28572,162.85714 -1.50165,-0.5424 -0.69994,-8.16718 0.90478,-7.547 239.71544,92.64396 144.11553,-70.49676 94.30533,-148.52045 z" style="fill:#000000;stroke:#000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>
      <path sodipodi:nodetypes="scssscsss" inkscape:connector-curvature="0" id="path2989" d="m 699.18299,605.89916 c -3.85252,-54.40181 -114.73182,-53.82168 -156.29061,-54.25384 -1.32856,-0.022 -0.36044,1.50984 0.18681,1.50222 48.39981,-0.67368 152.45649,0.0865 156.59911,52.55961 4.28572,54.28589 -160.71429,118.79483 -152.14286,157.36626 8.57143,38.57142 111.42857,42.85714 151.42857,42.85714 3.57143,0.35714 4.41833,-4.40812 -0.55003,-4.74693 -58.31047,-3.97642 -206.02141,-8.74237 -128.51312,-71.45528 44.36713,-35.89799 132.98622,-71.52329 129.28213,-123.82918 z" style="fill:#000000;stroke:#000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>
      <path sodipodi:nodetypes="cccc" inkscape:connector-curvature="0" id="path2991" d="m 733.91622,734.95854 c -73.61365,8.33242 -88.58771,-155.09604 -76.90831,-207.20046 -19.51736,87.16418 20.40332,220.49231 77.34839,211.95055 4.16688,-0.75761 3.09545,-5.5077 -0.44008,-4.75009 z" style="fill:#000000;stroke:#000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>
      <path sodipodi:nodetypes="zsccscsz" inkscape:connector-curvature="0" id="path3763" d="m 665.67537,508.00792 c 4.13445,-4.23376 5.65909,-16.14927 5.62971,-15.91986 -0.68185,5.32365 -2.02371,10.79795 -5.42022,15.06936 -2.26421,2.88157 -5.8962,3.59134 -7.48624,3.23957 -4.66074,-0.50154 -4.91608,-4.18437 -5.65193,-8.23608 -0.10462,-0.57606 -0.55251,-2.23088 -2.40042,-0.71228 -2.28916,2.55542 -2.32441,6.5932 -0.85636,8.03346 5.2342,5.13508 12.05102,2.75959 16.18546,-1.47417 z" style="fill:#000000;stroke:#000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>
      <path d="m 493.65967,486.07849 c 117.77719,-29.78972 182.70067,302.04509 48.13304,341.8111 -193.81862,57.27524 -172.17339,-310.43722 -48.13304,-341.8111 z m 13.68655,-7.29079 c -115.06127,1.20709 -170.54197,344.38926 -2.66791,357.14286 182.47821,13.8631 117.72918,-358.34995 2.66791,-357.14286 z" style="fill:#000000;stroke:#000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" id="path3846" inkscape:connector-curvature="0"/>
    </g>
    <path style="fill:none;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 260,532.99207 c 60,100 160,260 160,330" id="path3153" inkscape:connector-curvature="0" transform="translate(0,-10.631225)" sodipodi:nodetypes="cc"/>
    <g transform="matrix(-0.40176277,-0.91574378,0.91574378,-0.40176277,0,0)" inkscape:transform-center-x="1.425589" inkscape:transform-center-y="2.2692019" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:45px;line-height:125%;font-family:Iwona;-inkscape-font-specification:Iwona;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none" id="text3183">
      <path d="m -767.36465,573.85518 0,-1.35 c -0.855,0.72 -1.845,1.305 -2.97,1.305 -1.665,0 -1.98,-2.07 -1.98,-4.005 l 0,-14.625 -3.51,0 0,14.625 c 0,3.015 1.17,6.075 3.825,6.075 1.71,0 3.33,-0.855 4.635,-2.025 z m -4.5,-25.695 c 0,-1.215 -0.99,-2.205 -2.205,-2.205 -1.215,0 -2.205,0.99 -2.205,2.205 0,1.215 0.99,2.205 2.205,2.205 1.215,0 2.205,-0.99 2.205,-2.205 z" style="" id="path3773"/>
      <path d="m -749.17551,569.67018 c 0,-3.555 -3.78,-5.4 -7.47,-6.3 -2.16,-0.54 -4.5,-1.44 -4.5,-3.555 0,-1.935 1.98,-3.195 4.14,-3.195 2.385,0 4.77,0.72 6.75,2.025 l 0,-1.89 c -1.98,-1.305 -4.365,-2.025 -6.75,-2.025 -3.915,0 -7.515,2.385 -7.515,6.03 0,3.285 3.645,4.815 7.11,5.67 2.385,0.585 4.86,1.845 4.86,4.14 0,2.115 -2.16,3.42 -4.455,3.42 -2.79,0 -5.49,-0.675 -7.875,-2.025 l 0,1.89 c 2.385,1.35 5.085,2.025 7.875,2.025 4.05,0 7.83,-2.43 7.83,-6.21 z" style="" id="path3775"/>
    </g>
    <rect ry="0" rx="0" y="527.99518" x="-844.39709" height="109.72966" width="188.108" id="rect4875" style="fill:none;stroke:#008080;stroke-width:0.99999994;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:3.99999977, 1.99999989, 0.99999997, 1.99999989;stroke-dashoffset:0" transform="matrix(-0.38507619,-0.92288479,0.92288479,-0.38507619,0,0)"/>
  </g><ns1:frame id="frame1" ns1:refid="rect2993" ns1:title="This" ns1:sequence="1" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1500" ns1:transition-duration-ms="1000" ns1:transition-profile="accelerate-decelerate"/><ns1:frame id="frame2" ns1:refid="rect3765" ns1:title="is" ns1:sequence="2" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1500" ns1:transition-duration-ms="0" ns1:transition-profile="linear"/><ns1:frame id="frame3" ns1:refid="rect3767" ns1:title="not" ns1:sequence="3" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1500" ns1:transition-duration-ms="0" ns1:transition-profile="linear"/><ns1:frame id="frame4" ns1:refid="rect3769" ns1:title="a" ns1:sequence="4" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1500" ns1:transition-duration-ms="0" ns1:transition-profile="linear"/><ns1:frame id="frame5" ns1:refid="rect3771" ns1:title="slideshow" ns1:sequence="5" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="2000" ns1:transition-duration-ms="0" ns1:transition-profile="linear"/><ns1:frame id="frame7" ns1:refid="rect3773" ns1:title="This" ns1:sequence="7" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1500" ns1:transition-duration-ms="1000" ns1:transition-profile="accelerate-decelerate"/><ns1:frame id="frame9" ns1:refid="rect3787" ns1:title="Sozi" ns1:sequence="9" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="5000" ns1:transition-duration-ms="1000" ns1:transition-profile="accelerate-decelerate"/><ns1:frame id="frame6" ns1:refid="rect4308" ns1:title="This is not a slideshow" ns1:sequence="6" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1000" ns1:transition-duration-ms="1000" ns1:transition-profile="accelerate-decelerate"/><ns1:frame id="frame8" ns1:refid="rect4875" ns1:title="is" ns1:sequence="8" ns1:hide="true" ns1:timeout-enable="true" ns1:timeout-ms="1500" ns1:transition-duration-ms="1000" ns1:transition-profile="accelerate-decelerate"/><style ns1:version="13.11-11092117" id="sozi-style">/*
 * Sozi - A presentation tool using the SVG standard
 *
 * Copyright (C) 2010-2013 Guillaume Savaton
 *
 * This program is dual licensed under the terms of the MIT license
 * or the GNU General Public License (GPL) version 3.
 * A copy of both licenses is provided in the doc/ folder of the
 * official release of Sozi.
 * 
 * See http://sozi.baierouge.fr/wiki/en:license for details.
 */

#sozi-toc text {
   fill: #eff;
   font-family: Verdana, sans-serif;
   font-size: 12pt;
}

#sozi-toc text:hover {
   fill: #0cf;
   cursor: pointer;
}

#sozi-toc text.sozi-toc-current {
   fill: #fa4;
}

#sozi-toc-background {
   stroke: #222;
   stroke-opacity: 0.1;
   stroke-width: 10;
   fill: #222;
   fill-opacity: 0.9;
}

.sozi-toc-arrow {
   fill: #eff;
   fill-opacity: 0.75;
   stroke: none;
}

.sozi-toc-arrow:hover {
   fill: #0cf;
}

#sozi-framenumber circle {
   stroke: #222;
   stroke-opacity: 0.1;
   stroke-width: 4;
   fill: #222;
   fill-opacity: 0.9;
}

#sozi-framenumber text {
   fill: #eff;
   font-family: Verdana, sans-serif;
   font-size: 12pt;
}
</style></svg>
        <div class="sozi-frame-number" title="Click to show the frame list">1</div>
        <div class="sozi-frame-list">
            <ol>
                
                    
                        <li class="sozi-title-level-0" value="1"><a href="#frame1" title="This">This</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="2"><a href="#frame2" title="is">is</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="3"><a href="#frame3" title="not">not</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="4"><a href="#frame4" title="a">a</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="5"><a href="#frame5" title="slideshow">slideshow</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="6"><a href="#frame6" title="This is not a slideshow">This is not a slideshow</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="7"><a href="#frame7" title="This">This</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="8"><a href="#frame8" title="is">is</a></li>
                    
                
                    
                        <li class="sozi-title-level-0" value="9"><a href="#frame9" title="Sozi">Sozi</a></li>
                    
                
            </ol>
        </div>
        <div class="sozi-blank-screen">
            <span class="spinner"></span>
        </div>
        <script>var soziPresentationData = {"enableKeyboardZoom":true,"enableKeyboardRotation":true,"enableKeyboardNavigation":true,"enableMouseTranslation":true,"enableMouseZoom":true,"enableMouseRotation":true,"enableMouseNavigation":true,"updateURLOnFrameChange":false,"frames":[{"frameId":"frame1","title":"This","titleLevel":0,"notes":"","timeoutMs":1500,"timeoutEnable":true,"transitionDurationMs":1000,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":287.0755920410156,"cy":553.9180297851562,"width":80.0000028524783,"height":65.00000231763862,"opacity":1,"angle":59.750858397556385,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":287.0755920410156,"cy":553.9180297851562,"width":80.0000028524783,"height":65.00000231763862,"opacity":1,"angle":59.750858397556385,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame2","title":"is","titleLevel":0,"notes":"","timeoutMs":1500,"timeoutEnable":true,"transitionDurationMs":0,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":306.840087890625,"cy":603.2578735351562,"width":39.99999904352086,"height":64.99999844572142,"opacity":1,"angle":60.09817319511137,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":306.840087890625,"cy":603.2578735351562,"width":39.99999904352086,"height":64.99999844572142,"opacity":1,"angle":60.09817319511137,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame3","title":"not","titleLevel":0,"notes":"","timeoutMs":1500,"timeoutEnable":true,"transitionDurationMs":0,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":331.13775634765625,"cy":640.1878662109375,"width":60.00000015255393,"height":65.00000016526675,"opacity":1,"angle":59.40813250632951,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":331.13775634765625,"cy":640.1878662109375,"width":60.00000015255393,"height":65.00000016526675,"opacity":1,"angle":59.40813250632951,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame4","title":"a","titleLevel":0,"notes":"","timeoutMs":1500,"timeoutEnable":true,"transitionDurationMs":0,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":353.137451171875,"cy":679.9031982421875,"width":35.00000048005873,"height":65.00000089153764,"opacity":1,"angle":61.56013717588013,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":353.137451171875,"cy":679.9031982421875,"width":35.00000048005873,"height":65.00000089153764,"opacity":1,"angle":61.56013717588013,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame5","title":"slideshow","titleLevel":0,"notes":"","timeoutMs":2000,"timeoutEnable":true,"transitionDurationMs":0,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"linear","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":393.33538818359375,"cy":763.5491943359375,"width":166.1019090007921,"height":67.47890291575752,"opacity":1,"angle":64.06441180559557,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":393.33538818359375,"cy":763.5491943359375,"width":166.1019090007921,"height":67.47890291575752,"opacity":1,"angle":64.06441180559557,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame6","title":"This is not a slideshow","titleLevel":0,"notes":"","timeoutMs":1000,"timeoutEnable":true,"transitionDurationMs":1000,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":321.0634765625,"cy":699.0166015625,"width":460.00001374732034,"height":155.00000463224924,"opacity":1,"angle":61.12337806045173,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":321.0634765625,"cy":699.0166015625,"width":460.00001374732034,"height":155.00000463224924,"opacity":1,"angle":61.12337806045173,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame7","title":"This","titleLevel":0,"notes":"","timeoutMs":1500,"timeoutEnable":true,"transitionDurationMs":1000,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":711.5264282226562,"cy":574.296875,"width":194.01286501337972,"height":113.1741572705814,"opacity":1,"angle":-34.172817053326696,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":711.5264282226562,"cy":574.296875,"width":194.01286501337972,"height":113.1741572705814,"opacity":1,"angle":-34.172817053326696,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame8","title":"is","titleLevel":0,"notes":"","timeoutMs":1500,"timeoutEnable":true,"transitionDurationMs":1000,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":826.8518676757812,"cy":478.66595458984375,"width":188.10800833369126,"height":109.72966389859177,"opacity":1,"angle":-112.64846978046535,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":826.8518676757812,"cy":478.66595458984375,"width":188.10800833369126,"height":109.72966389859177,"opacity":1,"angle":-112.64846978046535,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}},{"frameId":"frame9","title":"Sozi","titleLevel":0,"notes":"","timeoutMs":5000,"timeoutEnable":true,"transitionDurationMs":1000,"showInFrameList":true,"showFrameNumber":true,"layerProperties":{"layer1":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""},"__sozi_auto__":{"transitionTimingFunction":"easeInOut","transitionRelativeZoom":0,"transitionPathId":""}},"cameraStates":{"layer1":{"cx":530,"cy":532.9920654296875,"width":1060.0001220703127,"height":1020.0000000000002,"opacity":1,"angle":0,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1},"__sozi_auto__":{"cx":530,"cy":532.9920654296875,"width":1060.0001220703127,"height":1020.0000000000002,"opacity":1,"angle":0,"clipped":true,"clipXOffset":0,"clipYOffset":0,"clipWidthFactor":1,"clipHeightFactor":1}}}],"elementsToHide":["rect2993","rect3765","rect3767","rect3769","rect3771","rect4308","rect3773","rect4875","rect3787"]};</script>

        <script>(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CameraState=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function copyIfSet(dest,src,prop){if(src.hasOwnProperty(prop)){dest[prop]=src[prop]}}var CameraState=function(){function CameraState(obj){_classCallCheck(this,CameraState);if(obj instanceof CameraState){this.copy(obj)}else{var initialBBox=obj.getBBox();this.svgRoot=obj;this.opacity=1;this.clipped=false;this.clipXOffset=0;this.clipYOffset=0;this.clipWidthFactor=1;this.clipHeightFactor=1;this.cx=initialBBox.x+initialBBox.width/2;this.cy=initialBBox.y+initialBBox.height/2;this.width=initialBBox.width;this.height=initialBBox.height;this.angle=0}}_createClass(CameraState,[{key:"copy",value:function copy(state){this.svgRoot=state.svgRoot;this.cx=state.cx;this.cy=state.cy;this.width=state.width;this.height=state.height;this.opacity=state.opacity;this.angle=state.angle;this.clipped=state.clipped;this.clipXOffset=state.clipXOffset;this.clipYOffset=state.clipYOffset;this.clipWidthFactor=state.clipWidthFactor;this.clipHeightFactor=state.clipHeightFactor}},{key:"toStorable",value:function toStorable(){return{cx:this.cx,cy:this.cy,width:this.width,height:this.height,opacity:this.opacity,angle:this.angle,clipped:this.clipped,clipXOffset:this.clipXOffset,clipYOffset:this.clipYOffset,clipWidthFactor:this.clipWidthFactor,clipHeightFactor:this.clipHeightFactor}}},{key:"toMinimalStorable",value:function toMinimalStorable(){return this.toStorable()}},{key:"fromStorable",value:function fromStorable(storable){copyIfSet(this,storable,"cx");copyIfSet(this,storable,"cy");copyIfSet(this,storable,"width");copyIfSet(this,storable,"height");copyIfSet(this,storable,"opacity");copyIfSet(this,storable,"angle");copyIfSet(this,storable,"clipped");copyIfSet(this,storable,"clipXOffset");copyIfSet(this,storable,"clipYOffset");copyIfSet(this,storable,"clipWidthFactor");copyIfSet(this,storable,"clipHeightFactor")}},{key:"setAtElement",value:function setAtElement(svgElement){var deltaX=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var deltaY=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var widthFactor=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var heightFactor=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var deltaAngle=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var bbox=svgElement.getBBox();var bboxCenter=this.svgRoot.createSVGPoint();bboxCenter.x=bbox.x+bbox.width/2;bboxCenter.y=bbox.y+bbox.height/2;var layerGroup=svgElement;while(layerGroup.parentNode.parentNode!==this.svgRoot){layerGroup=layerGroup.parentNode}var matrix=layerGroup.getCTM().inverse().multiply(svgElement.getCTM());bboxCenter=bboxCenter.matrixTransform(matrix);var scale=Math.sqrt(matrix.a*matrix.a+matrix.b*matrix.b);this.cx=bboxCenter.x+deltaX;this.cy=bboxCenter.y+deltaY;this.width=bbox.width*scale*widthFactor;this.height=bbox.height*scale*heightFactor;this.angle=Math.atan2(matrix.b,matrix.a)*180/Math.PI+deltaAngle}},{key:"resetClipping",value:function resetClipping(){this.clipXOffset=this.clipYOffset=0;this.clipWidthFactor=this.clipHeightFactor=1}},{key:"offsetFromElement",value:function offsetFromElement(svgElement){var cam=new CameraState(this.svgRoot);cam.setAtElement(svgElement);return{deltaX:this.cx-cam.cx,deltaY:this.cy-cam.cy,widthFactor:this.width/cam.width,heightFactor:this.height/cam.height,deltaAngle:this.angle-cam.angle}}},{key:"applyOffset",value:function applyOffset(_ref){var deltaX=_ref.deltaX,deltaY=_ref.deltaY,widthFactor=_ref.widthFactor,heightFactor=_ref.heightFactor,deltaAngle=_ref.deltaAngle;this.cx-=deltaX;this.cy-=deltaY;this.width/=widthFactor;this.height/=heightFactor;this.angle-=deltaAngle}},{key:"width",set:function set(w){this._width=!isNaN(w)&&w>=1?w:1},get:function get(){return this._width}},{key:"height",set:function set(h){this._height=!isNaN(h)&&h>=1?h:1},get:function get(){return this._height}},{key:"angle",set:function set(a){this._angle=!isNaN(a)?(a+180)%360:180;if(this._angle<0){this._angle+=180}else{this._angle-=180}},get:function get(){return this._angle}}]);return CameraState}();exports.CameraState=CameraState},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Presentation=exports.Layer=exports.Frame=exports.LayerProperties=void 0;var _events=require("events");var _CameraState=require("./CameraState");function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function copyIfSet(dest,src,prop){if(src.hasOwnProperty(prop)){dest[prop]=src[prop]}}var LayerProperties=function(){function LayerProperties(obj){_classCallCheck(this,LayerProperties);if(obj instanceof LayerProperties){this.copy(obj)}else{this.frame=obj;this.link=false;this.referenceElementId="";this.outlineElementId="";this.transitionTimingFunction="linear";this.transitionRelativeZoom=0;this.transitionPathId=""}}_createClass(LayerProperties,[{key:"copy",value:function copy(other){this.frame=other.frame;this.link=other.link;this.referenceElementId=other.referenceElementId;this.outlineElementId=other.outlineElementId;this.transitionTimingFunction=other.transitionTimingFunction;this.transitionRelativeZoom=other.transitionRelativeZoom;this.transitionPathId=other.transitionPathId}},{key:"toStorable",value:function toStorable(){return{link:this.link,referenceElementId:this.referenceElementId,outlineElementId:this.outlineElementId,transitionTimingFunction:this.transitionTimingFunction,transitionRelativeZoom:this.transitionRelativeZoom,transitionPathId:this.transitionPathId}}},{key:"toMinimalStorable",value:function toMinimalStorable(){return{transitionTimingFunction:this.transitionTimingFunction,transitionRelativeZoom:this.transitionRelativeZoom,transitionPathId:this.transitionPathId}}},{key:"fromStorable",value:function fromStorable(storable){copyIfSet(this,storable,"link");copyIfSet(this,storable,"referenceElementId");copyIfSet(this,storable,"outlineElementId");copyIfSet(this,storable,"transitionTimingFunction");copyIfSet(this,storable,"transitionRelativeZoom");copyIfSet(this,storable,"transitionPathId")}},{key:"index",get:function get(){return this.frame.layerProperties.indexOf(this)}},{key:"referenceElement",get:function get(){return this.frame.presentation.document.root.getElementById(this.referenceElementId)}},{key:"outlineElement",get:function get(){return this.frame.presentation.document.root.getElementById(this.outlineElementId)}},{key:"transitionPath",get:function get(){return this.frame.presentation.document.root.getElementById(this.transitionPathId)}},{key:"outlineElementHide",get:function get(){return this.frame.presentation.elementsToHide.indexOf(this.outlineElementId)>=0},set:function set(hide){if(this.outlineElement===this.frame.presentation.document.root){return}var hidden=this.outlineElementHide;if(hide&&!hidden){this.frame.presentation.elementsToHide.push(this.outlineElementId)}else if(!hide&&hidden){var index=this.frame.presentation.elementsToHide.indexOf(this.outlineElementId);this.frame.presentation.elementsToHide.splice(index,1)}if(this.outlineElement){this.outlineElement.style.visibility=hide?"hidden":"visible"}}},{key:"transitionPathHide",get:function get(){return this.frame.presentation.elementsToHide.indexOf(this.transitionPathId)>=0},set:function set(hide){var hidden=this.transitionPathHide;if(hide&&!hidden){this.frame.presentation.elementsToHide.push(this.transitionPathId)}else if(!hide&&hidden){var index=this.frame.presentation.elementsToHide.indexOf(this.transitionPathId);this.frame.presentation.elementsToHide.splice(index,1)}if(this.transitionPath){this.transitionPath.style.visibility=hide?"hidden":"visible"}}}]);return LayerProperties}();exports.LayerProperties=LayerProperties;var Frame=function(){function Frame(obj){var _this=this;var preserveId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;_classCallCheck(this,Frame);if(obj instanceof Frame){this.copy(obj,preserveId)}else{this.presentation=obj;this.frameId=obj.makeFrameId();this.layerProperties=obj.layers.map(function(lp){return new LayerProperties(_this)});this.cameraStates=obj.layers.map(function(cs){return new _CameraState.CameraState(obj.document.root)});this.title="New frame";this.titleLevel=0;this.notes="";this.timeoutMs=0;this.timeoutEnable=false;this.transitionDurationMs=1e3;this.showInFrameList=true;this.showFrameNumber=true}}_createClass(Frame,[{key:"copy",value:function copy(other,preserveId){this.presentation=other.presentation;if(!preserveId){this.frameId=other.presentation.makeFrameId()}this.title=other.title;this.titleLevel=other.titleLevel;this.notes=other.notes;this.timeoutMs=other.timeoutMs;this.timeoutEnable=other.timeoutEnable;this.transitionDurationMs=other.transitionDurationMs;this.showInFrameList=other.showInFrameList;this.showFrameNumber=other.showFrameNumber;this.layerProperties=other.layerProperties.map(function(lp){return new LayerProperties(lp)});this.cameraStates=other.cameraStates.map(function(cs){return new _CameraState.CameraState(cs)})}},{key:"toStorable",value:function toStorable(){var _this2=this;var layerProperties={};var cameraStates={};var cameraOffsets={};this.presentation.layers.forEach(function(layer,index){var lp=_this2.layerProperties[index];var cs=_this2.cameraStates[index];var re=lp.referenceElement;var key=layer.groupId;layerProperties[key]=lp.toStorable();cameraStates[key]=cs.toStorable();if(re){cameraOffsets[key]=_this2.cameraStates[index].offsetFromElement(re)}});return{frameId:this.frameId,title:this.title,titleLevel:this.titleLevel,notes:this.notes,timeoutMs:this.timeoutMs,timeoutEnable:this.timeoutEnable,transitionDurationMs:this.transitionDurationMs,showInFrameList:this.showInFrameList,showFrameNumber:this.showFrameNumber,layerProperties:layerProperties,cameraStates:cameraStates,cameraOffsets:cameraOffsets}}},{key:"toMinimalStorable",value:function toMinimalStorable(){var _this3=this;var layerProperties={};var cameraStates={};this.presentation.layers.forEach(function(layer,index){var lp=_this3.layerProperties[index];var cs=_this3.cameraStates[index];var key=layer.groupId;layerProperties[key]=lp.toMinimalStorable();cameraStates[key]=cs.toMinimalStorable()});return{frameId:this.frameId,title:this.title,titleLevel:this.titleLevel,notes:this.notes,timeoutMs:this.timeoutMs,timeoutEnable:this.timeoutEnable,transitionDurationMs:this.transitionDurationMs,showInFrameList:this.showInFrameList,showFrameNumber:this.showFrameNumber,layerProperties:layerProperties,cameraStates:cameraStates}}},{key:"fromStorable",value:function fromStorable(storable){var _this4=this;copyIfSet(this,storable,"frameId");copyIfSet(this,storable,"title");copyIfSet(this,storable,"titleLevel");copyIfSet(this,storable,"notes");copyIfSet(this,storable,"timeoutMs");copyIfSet(this,storable,"timeoutEnable");copyIfSet(this,storable,"transitionDurationMs");copyIfSet(this,storable,"showInFrameList");copyIfSet(this,storable,"showFrameNumber");this.presentation.layers.forEach(function(layer,index){var key=layer.groupId in storable.layerProperties?layer.groupId:"__sozi_auto__";if(key in storable.layerProperties){var lp=_this4.layerProperties[index];lp.fromStorable(storable.layerProperties[key]);var cs=_this4.cameraStates[index];cs.fromStorable(storable.cameraStates[key]);var re=lp.referenceElement;if(re){var ofs=storable.cameraOffsets[key]||{};cs.setAtElement(re,ofs.deltaX,ofs.deltaY,ofs.widthFactor,ofs.heightFactor,ofs.deltaAngle)}}})}},{key:"setAtStates",value:function setAtStates(states){var _this5=this;states.forEach(function(state,index){_this5.cameraStates[index].copy(state)})}},{key:"isLinkedTo",value:function isLinkedTo(frame,layerIndex){var _ref=this.index<frame.index?[this,frame]:[frame,this],_ref2=_slicedToArray(_ref,2),first=_ref2[0],second=_ref2[1];return second.layerProperties[layerIndex].link&&(second.index===first.index+1||second.index>first.index&&this.presentation.frames[second.index-1].isLinkedTo(first,layerIndex))}},{key:"index",get:function get(){return this.presentation.frames.indexOf(this)}}]);return Frame}();exports.Frame=Frame;var Layer=function(){function Layer(presentation,label,auto){_classCallCheck(this,Layer);this.presentation=presentation;this.label=label;this.auto=auto;this.svgNodes=[]}_createClass(Layer,[{key:"contains",value:function contains(svgElement){return this.svgNodes.some(function(node){return node.contains(svgElement)})}},{key:"groupId",get:function get(){return this.auto?"__sozi_auto__":this.svgNodes[0].getAttribute("id")}},{key:"index",get:function get(){return this.presentation.layers.indexOf(this)}},{key:"isVisible",get:function get(){return this.svgNodes.some(function(node){return window.getComputedStyle(node).display!=="none"})},set:function set(visible){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.svgNodes[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var node=_step.value;node.style.display=visible?"inline":"none"}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}}]);return Layer}();exports.Layer=Layer;var SVG_NS="http://www.w3.org/2000/svg";var Presentation=function(_EventEmitter){_inherits(Presentation,_EventEmitter);function Presentation(){var _this6;_classCallCheck(this,Presentation);_this6=_possibleConstructorReturn(this,_getPrototypeOf(Presentation).call(this));_this6.document=null;_this6.frames=[];_this6.layers=[];_this6.elementsToHide=[];_this6.aspectWidth=4;_this6.aspectHeight=3;_this6.enableKeyboardZoom=true;_this6.enableKeyboardRotation=true;_this6.enableKeyboardNavigation=true;_this6.enableMouseTranslation=true;_this6.enableMouseZoom=true;_this6.enableMouseRotation=true;_this6.enableMouseNavigation=true;_this6.updateURLOnFrameChange=true;return _this6}_createClass(Presentation,[{key:"setSVGDocument",value:function setSVGDocument(svgDocument){this.document=svgDocument;var autoLayer=new Layer(this,"auto",true);this.layers=[];var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.document.root.childNodes[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var svgNode=_step2.value;if(svgNode instanceof SVGGElement){var nodeId=svgNode.getAttribute("id");if(nodeId===null){autoLayer.svgNodes.push(svgNode)}else{var layer=new Layer(this,this.document.handler.getLabel(svgNode)||"#"+nodeId,false);layer.svgNodes.push(svgNode);this.layers.push(layer)}}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}this.layers.push(autoLayer);this.emit("svgChange")}},{key:"setInitialCameraState",value:function setInitialCameraState(){this.initialCameraState=new _CameraState.CameraState(this.document.root)}},{key:"toStorable",value:function toStorable(){return{aspectWidth:this.aspectWidth,aspectHeight:this.aspectHeight,enableKeyboardZoom:this.enableKeyboardZoom,enableKeyboardRotation:this.enableKeyboardRotation,enableKeyboardNavigation:this.enableKeyboardNavigation,enableMouseTranslation:this.enableMouseTranslation,enableMouseZoom:this.enableMouseZoom,enableMouseRotation:this.enableMouseRotation,enableMouseNavigation:this.enableMouseNavigation,updateURLOnFrameChange:this.updateURLOnFrameChange,frames:this.frames.map(function(frame){return frame.toStorable()}),elementsToHide:this.elementsToHide.slice()}}},{key:"toMinimalStorable",value:function toMinimalStorable(){return{enableKeyboardZoom:this.enableKeyboardZoom,enableKeyboardRotation:this.enableKeyboardRotation,enableKeyboardNavigation:this.enableKeyboardNavigation,enableMouseTranslation:this.enableMouseTranslation,enableMouseZoom:this.enableMouseZoom,enableMouseRotation:this.enableMouseRotation,enableMouseNavigation:this.enableMouseNavigation,updateURLOnFrameChange:this.updateURLOnFrameChange,frames:this.frames.map(function(frame){return frame.toMinimalStorable()}),elementsToHide:this.elementsToHide.slice()}}},{key:"fromStorable",value:function fromStorable(storable){var _this7=this;copyIfSet(this,storable,"aspectWidth");copyIfSet(this,storable,"aspectHeight");copyIfSet(this,storable,"enableKeyboardZoom");copyIfSet(this,storable,"enableKeyboardRotation");copyIfSet(this,storable,"enableKeyboardNavigation");copyIfSet(this,storable,"enableMouseTranslation");copyIfSet(this,storable,"enableMouseZoom");copyIfSet(this,storable,"enableMouseRotation");copyIfSet(this,storable,"enableMouseNavigation");copyIfSet(this,storable,"updateURLOnFrameChange");this.frames=storable.frames.map(function(f){var res=new Frame(_this7);res.fromStorable(f);return res});if(storable.elementsToHide){this.elementsToHide=storable.elementsToHide.slice()}}},{key:"makeFrameId",value:function makeFrameId(){var prefix="frame";var suffix=Math.floor(1e3*(1+9*Math.random()));var frameId;do{frameId=prefix+suffix;suffix++}while(this.frames.some(function(frame){return frame.frameId===frameId}));return frameId}},{key:"getFrameWithId",value:function getFrameWithId(frameId){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.frames[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var frame=_step3.value;if(frame.frameId===frameId){return frame}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return null}},{key:"getLayerWithId",value:function getLayerWithId(groupId){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.layers[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var layer=_step4.value;if(layer.groupId===groupId){return layer}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}return null}},{key:"updateLinkedLayers",value:function updateLinkedLayers(){var _this8=this;if(!this.frames.length){return}var firstCameraStates=this.frames[0].cameraStates;var defaultCameraState=firstCameraStates[firstCameraStates.length-1];var firstLayerProperties=this.frames[0].layerProperties;var defaultLayerProperties=firstLayerProperties[firstLayerProperties.length-1];this.layers.forEach(function(layer,layerIndex){var cameraState=defaultCameraState;var layerProperties=defaultLayerProperties;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=_this8.frames[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var frame=_step5.value;if(frame.layerProperties[layerIndex].link){frame.cameraStates[layerIndex].copy(cameraState);frame.layerProperties[layerIndex].referenceElementId=layerProperties.referenceElementId;frame.layerProperties[layerIndex].outlineElementId=layerProperties.outlineElementId}else{cameraState=frame.cameraStates[layerIndex];layerProperties=frame.layerProperties[layerIndex]}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]()}}finally{if(_didIteratorError5){throw _iteratorError5}}}})}},{key:"title",get:function get(){var svgTitles=this.document.root.getElementsByTagNameNS(SVG_NS,"title");return svgTitles.length?svgTitles[0].firstChild.wholeText.trim():"Untitled"}}]);return Presentation}(_events.EventEmitter);exports.Presentation=Presentation},{"./CameraState":1,events:14}],3:[function(require,module,exports){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}var _SVGDocumentWrapper=require("./svg/SVGDocumentWrapper");var _Presentation=require("./model/Presentation");var _Viewport=require("./player/Viewport");var _Player=require("./player/Player");var Media=_interopRequireWildcard(require("./player/Media"));var FrameList=_interopRequireWildcard(require("./player/FrameList"));var FrameNumber=_interopRequireWildcard(require("./player/FrameNumber"));var FrameURL=_interopRequireWildcard(require("./player/FrameURL"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function setPresenterMode(){sozi.player.disableMedia();sozi.player.pause();sozi.presentation.enableMouseTranslation=sozi.presentation.enableMouseNavigation=sozi.presentation.enableKeyboardZoom=sozi.presentation.enableKeyboardRotation=sozi.presentation.enableKeyboardNavigation=false;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=sozi.presentation.frames[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var frame=_step.value;frame.showFrameNumber=false}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}function notifyOnLoad(target,id){function checkSozi(){if(sozi){target.postMessage({name:"loaded",id:id,length:sozi.presentation.frames.length},"*")}else{setTimeout(checkSozi,1)}}checkSozi()}function onFrameChange(target){target.postMessage({name:"frameChange",index:sozi.player.currentFrame.index,title:sozi.player.currentFrame.title,notes:sozi.player.currentFrame.notes},"*")}function notifyOnFrameChange(target){sozi.player.addListener("frameChange",function(){return onFrameChange(target)});onFrameChange(target)}window.addEventListener("message",function(evt){switch(evt.data.name){case"notifyOnLoad":notifyOnLoad(evt.source,evt.data.id);break;case"notifyOnFrameChange":notifyOnFrameChange(evt.source);break;case"setPresenterMode":setPresenterMode();break;default:var method=sozi.player[evt.data.name];var args=evt.data.args||[];if(typeof method==="function"){method.apply(sozi.player,args)}else{console.log("Unsupported message: ".concat(evt.data.name))}}},false);window.addEventListener("load",function(){var svgRoot=document.querySelector("svg");svgRoot.style.display="inline";var presentation=new _Presentation.Presentation;presentation.setSVGDocument(new _SVGDocumentWrapper.SVGDocumentWrapper(svgRoot));var viewport=new _Viewport.Viewport(presentation,false);viewport.onLoad();presentation.fromStorable(window.soziPresentationData);var player=new _Player.Player(viewport,presentation);Media.init(player);FrameList.init(player);FrameNumber.init(player);FrameURL.init(player);window.sozi={presentation:presentation,viewport:viewport,player:player};player.addListener("stateChange",function(){if(player.playing){document.title=presentation.title}else{document.title=presentation.title+" (Paused)"}});window.addEventListener("resize",function(){return viewport.repaint()});if(presentation.frames.length){player.playFromFrame(FrameURL.getFrame())}viewport.repaint();player.disableBlankScreen();document.querySelector(".sozi-blank-screen .spinner").style.display="none"})},{"./model/Presentation":2,"./player/FrameList":6,"./player/FrameNumber":7,"./player/FrameURL":8,"./player/Media":9,"./player/Player":10,"./player/Viewport":12,"./svg/SVGDocumentWrapper":13}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Animator=void 0;var _events=require("events");function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var doRequestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;var perf=window.performance&&window.performance.now?window.performance:Date;var TIME_STEP_MS=40;var timer;var runningAnimators=0;var animatorList=[];function loop(){if(runningAnimators>0){if(doRequestAnimationFrame){doRequestAnimationFrame(loop)}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=animatorList[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var animator=_step.value;if(animator.running){animator.step()}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}else if(!doRequestAnimationFrame){window.clearInterval(timer)}}function _start(){if(doRequestAnimationFrame){doRequestAnimationFrame(loop)}else{timer=window.setInterval(loop,TIME_STEP_MS)}}var Animator=function(_EventEmitter){_inherits(Animator,_EventEmitter);function Animator(){var _this;_classCallCheck(this,Animator);_this=_possibleConstructorReturn(this,_getPrototypeOf(Animator).call(this));_this.durationMs=500;_this.initialTime=0;_this.running=false;animatorList.push(_assertThisInitialized(_this));return _this}_createClass(Animator,[{key:"start",value:function start(durationMs){this.durationMs=durationMs;this.initialTime=perf.now();this.emit("step",0);if(!this.running){this.running=true;runningAnimators++;if(runningAnimators===1){_start()}}}},{key:"stop",value:function stop(){if(this.running){this.running=false;runningAnimators--;this.emit("stop")}}},{key:"step",value:function step(){var elapsedTime=perf.now()-this.initialTime;if(elapsedTime>=this.durationMs){this.emit("step",1);this.running=false;runningAnimators--;this.emit("done")}else{this.emit("step",elapsedTime/this.durationMs)}}}]);return Animator}(_events.EventEmitter);exports.Animator=Animator},{events:14}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Camera=void 0;var _CameraState2=require("../model/CameraState");function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var SVG_NS="http://www.w3.org/2000/svg";var Camera=function(_CameraState){_inherits(Camera,_CameraState);function Camera(viewport,layer){var _this;_classCallCheck(this,Camera);_this=_possibleConstructorReturn(this,_getPrototypeOf(Camera).call(this,viewport.svgRoot));_this.viewport=viewport;_this.layer=layer;_this.selected=true;_this.svgClipRect=document.createElementNS(SVG_NS,"rect");var svgClipId;if(viewport.editMode){_this.maskValue=0;var svgMask=document.createElementNS(SVG_NS,"mask");svgClipId=viewport.makeUniqueId("sozi-mask-");svgMask.setAttribute("id",svgClipId);viewport.svgRoot.appendChild(svgMask);_this.svgMaskRect=document.createElementNS(SVG_NS,"rect");svgMask.appendChild(_this.svgMaskRect);_this.svgClipRect.setAttribute("fill","white");svgMask.appendChild(_this.svgClipRect);_this.svgClipOutlineRect1=document.createElementNS(SVG_NS,"rect");_this.svgClipOutlineRect1.setAttribute("stroke","black");_this.svgClipOutlineRect1.setAttribute("fill","none");viewport.svgRoot.appendChild(_this.svgClipOutlineRect1);_this.svgClipOutlineRect2=document.createElementNS(SVG_NS,"rect");_this.svgClipOutlineRect2.setAttribute("stroke","white");_this.svgClipOutlineRect2.setAttribute("fill","none");_this.svgClipOutlineRect2.setAttribute("stroke-dasharray","2,2");viewport.svgRoot.appendChild(_this.svgClipOutlineRect2);_this.concealClipping()}else{var svgClipPath=document.createElementNS(SVG_NS,"clipPath");svgClipId=viewport.makeUniqueId("sozi-clip-path-");svgClipPath.setAttribute("id",svgClipId);svgClipPath.appendChild(_this.svgClipRect);viewport.svgRoot.appendChild(svgClipPath)}_this.svgTransformGroups=layer.svgNodes.map(function(svgNode){var svgClippedGroup=document.createElementNS(SVG_NS,"g");viewport.svgRoot.insertBefore(svgClippedGroup,svgNode);if(viewport.editMode){svgClippedGroup.setAttribute("mask","url(#"+svgClipId+")")}else{svgClippedGroup.setAttribute("clip-path","url(#"+svgClipId+")")}var svgGroup=document.createElementNS(SVG_NS,"g");svgGroup.appendChild(svgNode);svgClippedGroup.appendChild(svgGroup);return svgGroup});return _this}_createClass(Camera,[{key:"revealClipping",value:function revealClipping(){this.maskValue=64;this.svgClipOutlineRect1.style.display="inline";this.svgClipOutlineRect2.style.display="inline"}},{key:"concealClipping",value:function concealClipping(){this.maskValue=0;this.svgClipOutlineRect1.style.display="none";this.svgClipOutlineRect2.style.display="none"}},{key:"rotate",value:function rotate(angle){this.restoreAspectRatio();this.angle+=angle;this.update()}},{key:"zoom",value:function zoom(factor,x,y){this.width/=factor;this.height/=factor;this.restoreAspectRatio();this.translate((1-factor)*(x-this.viewport.width/2),(1-factor)*(y-this.viewport.height/2))}},{key:"translate",value:function translate(deltaX,deltaY){var scale=this.scale;var angleRad=this.angle*Math.PI/180;var si=Math.sin(angleRad);var co=Math.cos(angleRad);this.cx-=(deltaX*co-deltaY*si)/scale;this.cy-=(deltaX*si+deltaY*co)/scale;this.restoreAspectRatio();this.update()}},{key:"clip",value:function clip(x0,y0,x1,y1){this.clipped=true;var scale=this.scale;var clipWidth=Math.abs(x1-x0)+1;var clipHeight=Math.abs(y1-y0)+1;this.clipXOffset=(Math.min(x0,x1)-(this.viewport.width-clipWidth)/2)*this.width/clipWidth;this.clipYOffset=(Math.min(y0,y1)-(this.viewport.height-clipHeight)/2)*this.height/clipHeight;this.clipWidthFactor=clipWidth/this.width/scale;this.clipHeightFactor=clipHeight/this.height/scale;this.update()}},{key:"restoreAspectRatio",value:function restoreAspectRatio(){var viewportRatio=this.viewport.width/this.viewport.height;var camRatio=this.width/this.height;var ratio=viewportRatio/camRatio;if(ratio>1){this.width*=ratio;if(this.clipped){this.clipWidthFactor/=ratio}}else{this.height/=ratio;if(this.clipped){this.clipHeightFactor*=ratio}}}},{key:"getCandidateReferenceElement",value:function getCandidateReferenceElement(){if(!this.layer.svgNodes.length||!this.svgRoot.getIntersectionList){return{element:null,score:null}}var viewportRect=this.svgRoot.createSVGRect();viewportRect.x=0;viewportRect.y=0;viewportRect.width=this.viewport.width;viewportRect.height=this.viewport.height;var viewportArea=this.viewport.width*this.viewport.height;var intersectionList=this.svgRoot.getIntersectionList(viewportRect,this.layer.svgNodes[0]);var element=null;var score=null;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=intersectionList[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var elt=_step.value;if(elt.hasAttribute("id")){var eltRect=elt.getBoundingClientRect();var eltArea=eltRect.width*eltRect.height;var l=Math.max(eltRect.left,this.viewport.x);var t=Math.max(eltRect.top,this.viewport.y);var r=Math.min(eltRect.right,this.viewport.x+this.viewport.width);var b=Math.min(eltRect.bottom,this.viewport.y+this.viewport.height);var intersectArea=(r-l)*(b-t);var eltScore=viewportArea+eltArea-2*intersectArea;if(score===null||eltScore<score){score=eltScore;element=elt}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return{element:element,score:score}}},{key:"update",value:function update(){var rect=this.clipRect;this.svgClipRect.setAttribute("x",rect.x);this.svgClipRect.setAttribute("y",rect.y);this.svgClipRect.setAttribute("width",rect.width);this.svgClipRect.setAttribute("height",rect.height);if(this.viewport.editMode){this.svgMaskRect.setAttribute("fill","rgb("+this.maskValue+","+this.maskValue+","+this.maskValue+")");this.svgMaskRect.setAttribute("x",0);this.svgMaskRect.setAttribute("y",0);this.svgMaskRect.setAttribute("width",this.viewport.width);this.svgMaskRect.setAttribute("height",this.viewport.height);this.svgClipOutlineRect1.setAttribute("x",rect.x);this.svgClipOutlineRect1.setAttribute("y",rect.y);this.svgClipOutlineRect1.setAttribute("width",rect.width);this.svgClipOutlineRect1.setAttribute("height",rect.height);this.svgClipOutlineRect2.setAttribute("x",rect.x);this.svgClipOutlineRect2.setAttribute("y",rect.y);this.svgClipOutlineRect2.setAttribute("width",rect.width);this.svgClipOutlineRect2.setAttribute("height",rect.height)}var scale=this.scale;var translateX=this.viewport.width/scale/2-this.cx;var translateY=this.viewport.height/scale/2-this.cy;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.svgTransformGroups[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var svgGroup=_step2.value;svgGroup.setAttribute("transform","scale("+scale+")"+"translate("+translateX+","+translateY+")"+"rotate("+-this.angle+","+this.cx+","+this.cy+")");svgGroup.setAttribute("opacity",this.opacity)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}},{key:"interpolate",value:function interpolate(initialState,finalState,progress,timingFunction,relativeZoom,svgPath,reversePath){var tfProgress=timingFunction(progress);var tfRemaining=1-tfProgress;function linear(initial,_final){return _final*tfProgress+initial*tfRemaining}function quadratic(u0,u1){var um=(relativeZoom>0?Math.min(u0,u1):Math.max(u0,u1))*(1-relativeZoom);var du0=u0-um;var du1=u1-um;var r=Math.sqrt(du0/du1);var tm=r/(1+r);var k=du0/tm/tm;var dt=progress-tm;return k*dt*dt+um}if(relativeZoom){this.width=quadratic(initialState.width,finalState.width);this.height=quadratic(initialState.height,finalState.height)}else{this.width=linear(initialState.width,finalState.width);this.height=linear(initialState.height,finalState.height)}if(svgPath){var pathLength=svgPath.getTotalLength();var startPoint=svgPath.getPointAtLength(reversePath?pathLength:0);var endPoint=svgPath.getPointAtLength(reversePath?0:pathLength);var currentPoint=svgPath.getPointAtLength(pathLength*(reversePath?tfRemaining:tfProgress));this.cx=currentPoint.x+linear(initialState.cx-startPoint.x,finalState.cx-endPoint.x);this.cy=currentPoint.y+linear(initialState.cy-startPoint.y,finalState.cy-endPoint.y)}else{this.cx=linear(initialState.cx,finalState.cx);this.cy=linear(initialState.cy,finalState.cy)}this.opacity=linear(initialState.opacity,finalState.opacity);if(finalState.angle-initialState.angle>180){this.angle=linear(initialState.angle,finalState.angle-360)}else if(finalState.angle-initialState.angle<-180){this.angle=linear(initialState.angle-360,finalState.angle)}else{this.angle=linear(initialState.angle,finalState.angle)}this.clipped=true;var scale=this.scale;var clipDefaults={clipXOffset:0,clipYOffset:0,clipWidthFactor:this.viewport.width/this.width/scale,clipHeightFactor:this.viewport.height/this.height/scale};var initialClipping=initialState.clipped?initialState:clipDefaults;var finalClipping=finalState.clipped?finalState:clipDefaults;for(var clipProp in clipDefaults){this[clipProp]=linear(initialClipping[clipProp],finalClipping[clipProp])}}},{key:"scale",get:function get(){return Math.min(this.viewport.width/this.width,this.viewport.height/this.height)}},{key:"clipRect",get:function get(){var width,height,x,y;if(this.clipped){var scale=this.scale;width=Math.round(this.width*this.clipWidthFactor*scale);height=Math.round(this.height*this.clipHeightFactor*scale);x=Math.round((this.viewport.width-width)/2+this.clipXOffset*this.clipWidthFactor*scale);y=Math.round((this.viewport.height-height)/2+this.clipYOffset*this.clipHeightFactor*scale)}else{width=this.viewport.width;height=this.viewport.height;x=0;y=0}return{width:width,height:height,x:x,y:y}}}]);return Camera}(_CameraState2.CameraState);exports.Camera=Camera},{"../model/CameraState":1}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.init=init;exports.open=open;exports.close=close;exports.toggle=toggle;var _Animator=require("./Animator");var Timing=_interopRequireWildcard(require("./Timing"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};if(obj!=null){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}var DURATION_MS=500;var frameList;var links;var player;var animator;var isOpen=false;var startOffset=-1;var endOffset=-1;var currentOffset=startOffset;function init(aPlayer){player=aPlayer;frameList=document.querySelector(".sozi-frame-list");links=frameList.querySelectorAll("li a");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{var _loop=function _loop(){var link=_step.value;link.addEventListener("click",function(evt){if(evt.button===0){player.previewFrame(link.hash.slice(1));evt.preventDefault()}})};for(var _iterator=links[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){_loop()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}animator=new _Animator.Animator;animator.addListener("step",onAnimatorStep);window.addEventListener("keypress",onKeyPress,false);window.addEventListener("resize",function(){return setCurrentOffset(currentOffset)});player.viewport.addListener("mouseDown",onMouseDown);frameList.addEventListener("mouseout",onMouseOut,false);aPlayer.addListener("frameChange",onFrameChange);setCurrentOffset(startOffset)}function setCurrentOffset(offset){currentOffset=offset;frameList.style.left=currentOffset*frameList.offsetWidth+"px"}function moveTo(offset){player.pause();startOffset=currentOffset;endOffset=offset;animator.start(Math.abs(endOffset-startOffset)*DURATION_MS)}function open(){moveTo(0)}function close(){moveTo(-1)}function toggle(){moveTo(-1-endOffset)}function onKeyPress(evt){if(evt.altKey||evt.ctrlKey||evt.metaKey){return}switch(evt.charCode||evt.which){case 84:case 116:if(player.presentation.enableKeyboardNavigation){player.disableBlankScreen();toggle()}break;default:return}evt.stopPropagation();evt.preventDefault()}function onAnimatorStep(progress){var p=Timing.ease(progress);setCurrentOffset(endOffset*p+startOffset*(1-p))}function onMouseDown(button){if(player.presentation.enableMouseNavigation&&button===1){toggle()}}function onMouseOut(evt){var rel=evt.relatedTarget;while(rel&&rel!==frameList&&rel!==document.documentElement){rel=rel.parentNode}if(rel!==frameList){close();evt.stopPropagation()}}function onFrameChange(){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=links[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var link=_step2.value;link.className=link.hash==="#"+player.currentFrame.frameId?"current":""}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}},{"./Animator":4,"./Timing":11}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.init=init;var FrameList=_interopRequireWildcard(require("./FrameList"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};if(obj!=null){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function init(player){var frameNumber=document.querySelector(".sozi-frame-number");player.addListener("frameChange",function(){frameNumber.innerHTML=player.currentFrame.index+1;frameNumber.style.visibility=player.currentFrame.showFrameNumber?"visible":"hidden"});frameNumber.addEventListener("click",FrameList.open)}},{"./FrameList":6}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.init=init;exports.getFrame=getFrame;var player;function init(aPlayer){player=aPlayer;window.addEventListener("hashchange",onHashChange,false);if(player.presentation.updateURLOnFrameChange){player.addListener("frameChange",onFrameChange)}}function getFrame(){if(window.location.hash){var indexOrId=window.location.hash.slice(1);var frame=player.presentation.getFrameWithId(indexOrId);if(frame){return frame}else{var index=parseInt(indexOrId);return!isNaN(index)&&index>0&&index<=player.presentation.frames.length?player.presentation.frames[index-1]:player.currentFrame}}else{return player.currentFrame}}function onHashChange(){var frame=getFrame();if(player.currentFrame!==frame){player.moveToFrame(frame)}}function onFrameChange(){window.location.hash="#"+player.currentFrame.frameId}},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.init=init;exports.disable=disable;var svgNs="http://www.w3.org/2000/svg";var soziNs="http://sozi.baierouge.fr";var xhtmlNs="http://www.w3.org/1999/xhtml";var player;function defaultEventHandler(evt){evt.stopPropagation()}var mediaToStartByFrameId={};var mediaToStopByFrameId={};function onFrameChange(){var frameId=player.currentFrame.frameId;if(frameId in mediaToStartByFrameId){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=mediaToStartByFrameId[frameId][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var m=_step.value;m.play()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}if(frameId in mediaToStopByFrameId){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=mediaToStopByFrameId[frameId][Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _m=_step2.value;_m.pause()}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}function init(aPlayer){player=aPlayer;player.addListener("frameChange",onFrameChange);var svgRoot=player.presentation.document.root;var svgAttributes=svgRoot.attributes;var soziPrefix;for(var attrIndex=0;attrIndex<svgAttributes.length;attrIndex++){if(svgAttributes[attrIndex].value===soziNs){soziPrefix=svgAttributes[attrIndex].name.slice(6);break}}if(!soziPrefix){return}var videoSources=Array.from(svgRoot.getElementsByTagName(soziPrefix+":video"));var audioSources=Array.from(svgRoot.getElementsByTagName(soziPrefix+":audio"));var mediaList=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=videoSources.concat(audioSources)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var source=_step3.value;var rect=source.parentNode;var tagName=source.localName.slice(soziPrefix.length+1);var htmlSource=document.createElementNS(xhtmlNs,"source");htmlSource.setAttribute("type",source.getAttribute(soziPrefix+":type"));htmlSource.setAttribute("src",source.getAttribute(soziPrefix+":src"));var j=void 0;for(j=0;j<mediaList.length;j+=1){if(mediaList[j].rect===rect){break}}if(j===mediaList.length){rect.setAttribute("visibility","hidden");var width=rect.getAttribute("width");var height=rect.getAttribute("height");var htmlMedia=document.createElementNS(xhtmlNs,tagName);if(source.getAttribute(soziPrefix+":controls")==="true"){htmlMedia.setAttribute("controls","controls");htmlMedia.setAttribute("style","width:".concat(width,"px;height:").concat(height,"px;"))}if(tagName==="video"){htmlMedia.setAttribute("width",width);htmlMedia.setAttribute("height",height)}htmlMedia.addEventListener("click",defaultEventHandler,false);htmlMedia.addEventListener("mousedown",defaultEventHandler,false);htmlMedia.addEventListener("mouseup",defaultEventHandler,false);htmlMedia.addEventListener("mousemove",defaultEventHandler,false);htmlMedia.addEventListener("contextmenu",defaultEventHandler,false);var html=document.createElementNS(xhtmlNs,"html");html.appendChild(htmlMedia);var foreignObject=document.createElementNS(svgNs,"foreignObject");foreignObject.setAttribute("x",rect.getAttribute("x"));foreignObject.setAttribute("y",rect.getAttribute("y"));foreignObject.setAttribute("width",width);foreignObject.setAttribute("height",height);foreignObject.appendChild(html);rect.parentNode.insertBefore(foreignObject,rect.nextSibling);if(source.hasAttribute(soziPrefix+":start-frame")){var startFrameId=source.getAttribute(soziPrefix+":start-frame");var stopFrameId=source.getAttribute(soziPrefix+":stop-frame");if(!(startFrameId in mediaToStartByFrameId)){mediaToStartByFrameId[startFrameId]=[]}if(!(stopFrameId in mediaToStopByFrameId)){mediaToStopByFrameId[stopFrameId]=[]}mediaToStartByFrameId[startFrameId].push(htmlMedia);mediaToStopByFrameId[stopFrameId].push(htmlMedia)}if(source.getAttribute(soziPrefix+":loop")==="true"){htmlMedia.setAttribute("loop","true")}mediaList.push({rect:source.parentNode,htmlMedia:htmlMedia})}mediaList[j].htmlMedia.appendChild(htmlSource)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}function disable(){player.removeListener("frameChange",onFrameChange);var frameId=player.currentFrame.frameId;if(frameId in mediaToStartByFrameId){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=mediaToStartByFrameId[frameId][Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var m=_step4.value;m.pause()}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Player=void 0;var _Animator=require("./Animator");var Timing=_interopRequireWildcard(require("./Timing"));var _CameraState=require("../model/CameraState");var _Presentation=require("../model/Presentation");var _events=require("events");var Media=_interopRequireWildcard(require("./Media"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap;_getRequireWildcardCache=function _getRequireWildcardCache(){return cache};return cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var DEFAULT_TRANSITION_DURATION_MS=500;var DEFAULT_RELATIVE_ZOOM=0;var DEFAULT_TIMING_FUNCTION="ease";var SCALE_FACTOR=1.05;var ROTATE_STEP=5;var Player=function(_EventEmitter){_inherits(Player,_EventEmitter);function Player(viewport,presentation){var _this;var editMode=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,Player);_this=_possibleConstructorReturn(this,_getPrototypeOf(Player).call(this));_this.editMode=!!editMode;_this.viewport=viewport;_this.presentation=presentation;_this.animator=new _Animator.Animator;_this.playing=false;_this.waitingTimeout=false;_this.currentFrame=presentation.frames[0];_this.targetFrame=presentation.frames[0];_this.timeoutHandle=null;_this.transitions=[];if(!_this.editMode){_this.viewport.addListener("click",function(btn){return _this.onClick(btn)});window.addEventListener("keydown",function(evt){return _this.onKeyDown(evt)},false);if(_this.presentation.enableMouseTranslation){_this.viewport.addListener("dragStart",function(){return _this.pause()})}_this.viewport.addListener("userChangeState",function(){return _this.pause()});window.addEventListener("keypress",function(evt){return _this.onKeyPress(evt)},false)}_this.animator.addListener("step",function(p){return _this.onAnimatorStep(p)});_this.animator.addListener("stop",function(){return _this.onAnimatorStop()});_this.animator.addListener("done",function(){return _this.onAnimatorDone()});_this.addListener("frameChange",function(){document.title=_this.presentation.title+"  "+_this.currentFrame.title});return _this}_createClass(Player,[{key:"onClick",value:function onClick(button){if(this.presentation.enableMouseNavigation){switch(button){case 0:this.moveToNext();break;case 2:this.moveToPrevious();break}}}},{key:"onKeyDown",value:function onKeyDown(evt){if(evt.altKey||evt.ctrlKey||evt.metaKey){return}switch(evt.keyCode){case 36:if(this.presentation.enableKeyboardNavigation){if(evt.shiftKey){this.jumpToFirst()}else{this.moveToFirst()}}break;case 35:if(this.presentation.enableKeyboardNavigation){if(evt.shiftKey){this.jumpToLast()}else{this.moveToLast()}}break;case 38:case 33:case 37:if(this.presentation.enableKeyboardNavigation){if(evt.shiftKey){this.jumpToPrevious()}else{this.moveToPrevious()}}break;case 40:case 34:case 39:case 13:case 32:if(this.presentation.enableKeyboardNavigation){if(evt.shiftKey){this.jumpToNext()}else{this.moveToNext()}}break;default:return}evt.stopPropagation();evt.preventDefault()}},{key:"onKeyPress",value:function onKeyPress(evt){if(evt.altKey||evt.ctrlKey||evt.metaKey){return}switch(evt.charCode||evt.which){case 43:if(this.presentation.enableKeyboardZoom){this.viewport.zoom(SCALE_FACTOR,this.viewport.width/2,this.viewport.height/2);this.pause()}break;case 45:if(this.presentation.enableKeyboardZoom){this.viewport.zoom(1/SCALE_FACTOR,this.viewport.width/2,this.viewport.height/2);this.pause()}break;case 82:if(this.presentation.enableKeyboardRotation){this.viewport.rotate(-ROTATE_STEP);this.pause()}break;case 114:if(this.presentation.enableKeyboardRotation){this.viewport.rotate(ROTATE_STEP);this.pause()}break;case 80:case 112:if(this.playing){this.pause()}else{this.resume()}break;case 46:if(this.presentation.enableKeyboardNavigation){this.toggleBlankScreen()}break;default:return}evt.stopPropagation();evt.preventDefault()}},{key:"findFrame",value:function findFrame(frame){if(frame instanceof _Presentation.Frame){return frame}if(typeof frame==="string"){return this.presentation.getFrameWithId(frame)}if(typeof frame==="number"){return this.presentation.frames[frame]}return null}},{key:"showCurrentFrame",value:function showCurrentFrame(){this.viewport.setAtStates(this.currentFrame.cameraStates);this.viewport.update();this.emit("frameChange")}},{key:"playFromFrame",value:function playFromFrame(frame){if(!this.playing){this.playing=true;this.emit("stateChange")}this.waitingTimeout=false;this.targetFrame=this.currentFrame=this.findFrame(frame);this.showCurrentFrame();this.waitTimeout()}},{key:"pause",value:function pause(){this.animator.stop();if(this.waitingTimeout){window.clearTimeout(this.timeoutHandle);this.waitingTimeout=false}if(this.playing){this.playing=false;this.emit("stateChange")}this.targetFrame=this.currentFrame}},{key:"resume",value:function resume(){this.playFromFrame(this.currentFrame)}},{key:"waitTimeout",value:function waitTimeout(){var _this2=this;if(this.currentFrame.timeoutEnable){this.waitingTimeout=true;this.timeoutHandle=window.setTimeout(function(){return _this2.moveToNext()},this.currentFrame.timeoutMs)}}},{key:"jumpToFrame",value:function jumpToFrame(frame){this.disableBlankScreen();this.pause();this.targetFrame=this.currentFrame=this.findFrame(frame);this.showCurrentFrame()}},{key:"jumpToFirst",value:function jumpToFirst(){this.jumpToFrame(0)}},{key:"jumpToLast",value:function jumpToLast(){this.jumpToFrame(this.presentation.frames.length-1)}},{key:"jumpToPrevious",value:function jumpToPrevious(){this.jumpToFrame(this.previousFrame)}},{key:"jumpToNext",value:function jumpToNext(){this.jumpToFrame(this.nextFrame)}},{key:"moveToFrame",value:function moveToFrame(frame){this.disableBlankScreen();if(this.waitingTimeout){window.clearTimeout(this.timeoutHandle);this.waitingTimeout=false}this.targetFrame=this.findFrame(frame);var layerProperties=null;var durationMs=DEFAULT_TRANSITION_DURATION_MS;var useTransitionPath=false;var backwards=false;if(this.currentFrame){if(this.targetFrame===this.nextFrame){durationMs=this.targetFrame.transitionDurationMs;layerProperties=this.targetFrame.layerProperties;useTransitionPath=true}else if(this.targetFrame===this.previousFrame){durationMs=this.currentFrame.transitionDurationMs;layerProperties=this.currentFrame.layerProperties;useTransitionPath=true;backwards=true}}if(!this.editMode&&!this.playing){this.playing=true;this.emit("stateChange")}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.viewport.cameras[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var camera=_step.value;var timingFunction=Timing[DEFAULT_TIMING_FUNCTION];var relativeZoom=DEFAULT_RELATIVE_ZOOM;var transitionPath=null;if(layerProperties){var lp=layerProperties[camera.layer.index];relativeZoom=lp.transitionRelativeZoom;timingFunction=Timing[lp.transitionTimingFunction];if(useTransitionPath){transitionPath=lp.transitionPath}if(backwards){timingFunction=timingFunction.reverse}}this.setupTransition(camera,timingFunction,relativeZoom,transitionPath,backwards)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}this.animator.start(durationMs)}},{key:"moveToFirst",value:function moveToFirst(){this.moveToFrame(0)}},{key:"moveToLast",value:function moveToLast(){this.moveToFrame(this.presentation.frames.length-1)}},{key:"moveToPrevious",value:function moveToPrevious(){for(var index=this.previousFrame.index;index>=0;index--){var frame=this.presentation.frames[index];if(!frame.timeoutEnable||frame.timeoutMs!==0){this.moveToFrame(frame);break}}}},{key:"moveToNext",value:function moveToNext(){this.moveToFrame(this.nextFrame)}},{key:"moveToCurrent",value:function moveToCurrent(){this.moveToFrame(this.currentFrame)}},{key:"previewFrame",value:function previewFrame(frame){this.targetFrame=this.findFrame(frame);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.viewport.cameras[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var camera=_step2.value;this.setupTransition(camera,Timing[DEFAULT_TIMING_FUNCTION],DEFAULT_RELATIVE_ZOOM)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}this.animator.start(DEFAULT_TRANSITION_DURATION_MS)}},{key:"setupTransition",value:function setupTransition(camera,timingFunction,relativeZoom,svgPath,reverse){if(this.animator.running){this.animator.stop()}this.transitions.push({camera:camera,initialState:new _CameraState.CameraState(camera),finalState:this.targetFrame.cameraStates[camera.layer.index],timingFunction:timingFunction,relativeZoom:relativeZoom,svgPath:svgPath,reverse:reverse})}},{key:"onAnimatorStep",value:function onAnimatorStep(progress){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.transitions[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var transition=_step3.value;transition.camera.interpolate(transition.initialState,transition.finalState,progress,transition.timingFunction,transition.relativeZoom,transition.svgPath,transition.reverse);transition.camera.update()}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}},{key:"onAnimatorStop",value:function onAnimatorStop(){this.transitions=[];this.currentFrame=this.targetFrame;this.emit("frameChange")}},{key:"onAnimatorDone",value:function onAnimatorDone(){this.onAnimatorStop();if(this.playing){this.waitTimeout()}}},{key:"enableBlankScreen",value:function enableBlankScreen(){this.pause();var blankScreen=document.querySelector(".sozi-blank-screen");if(blankScreen){blankScreen.style.opacity=1;blankScreen.style.visibility="visible"}}},{key:"disableBlankScreen",value:function disableBlankScreen(){var blankScreen=document.querySelector(".sozi-blank-screen");if(blankScreen){blankScreen.style.opacity=0;blankScreen.style.visibility="hidden"}}},{key:"toggleBlankScreen",value:function toggleBlankScreen(){if(this.blankScreenIsVisible){this.disableBlankScreen()}else{this.enableBlankScreen()}}},{key:"disableMedia",value:function disableMedia(){Media.disable()}},{key:"previousFrame",get:function get(){var frame=this.animator.running?this.targetFrame:this.currentFrame;var index=(frame.index+this.presentation.frames.length-1)%this.presentation.frames.length;return this.presentation.frames[index]}},{key:"nextFrame",get:function get(){var frame=this.animator.running?this.targetFrame:this.currentFrame;var index=(frame.index+1)%this.presentation.frames.length;return this.presentation.frames[index]}},{key:"blankScreenIsVisible",get:function get(){return document.querySelector(".sozi-blank-screen").style.visibility==="visible"}}]);return Player}(_events.EventEmitter);exports.Player=Player},{"../model/CameraState":1,"../model/Presentation":2,"./Animator":4,"./Media":9,"./Timing":11,events:14}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.makeBezier=makeBezier;exports.makeSteps=makeSteps;exports.stepMiddle=stepMiddle;exports.stepEnd=exports.stepStart=exports.easeInOut=exports.easeOut=exports.easeIn=exports.ease=exports.linear=void 0;function A(xy1,xy2){return 1-3*xy2+3*xy1}function B(xy1,xy2){return 3*xy2-6*xy1}function C(xy1){return 3*xy1}function bezier(t,a,b,c){return((a*t+b)*t+c)*t}function bezierSlope(t,a,b,c){return(3*a*t+2*b)*t+c}function makeBezier(x1,y1,x2,y2){var ax=A(x1,x2),bx=B(x1,x2),cx=C(x1);var ay=A(y1,y2),by=B(y1,y2),cy=C(y1);if(x1===y1&&x2===y2){return function(x){return x}}return function(x){var t=x;for(var i=0;i<4;i++){var currentSlope=bezierSlope(t,ax,bx,cx);if(currentSlope===0){break}var currentX=bezier(t,ax,bx,cx)-x;t-=currentX/currentSlope}return bezier(t,ay,by,cy)}}function makeSteps(n,direction){var trunc=direction==="start"?Math.ceil:Math.floor;return function(x){return trunc(n*x)/n}}var linear=makeBezier(0,0,1,1);exports.linear=linear;linear.reverse=linear;var ease=makeBezier(.25,.1,.25,1);exports.ease=ease;ease.reverse=ease;var easeIn=makeBezier(.42,0,1,1);exports.easeIn=easeIn;var easeOut=makeBezier(0,0,.58,1);exports.easeOut=easeOut;easeIn.reverse=easeOut;easeOut.reverse=easeIn;var easeInOut=makeBezier(.42,0,.58,1);exports.easeInOut=easeInOut;easeInOut.reverse=easeInOut;var stepStart=makeSteps(1,"start");exports.stepStart=stepStart;var stepEnd=makeSteps(1,"end");exports.stepEnd=stepEnd;stepStart.reverse=stepEnd;stepEnd.reverse=stepStart;function stepMiddle(x){return x>=.5?1:0}stepMiddle.reverse=stepMiddle},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Viewport=void 0;var _Camera=require("./Camera");var _events=require("events");function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var DRAG_BUTTON=0;var DRAG_THRESHOLD_PX=5;var SCALE_FACTOR=1.05;var ROTATE_STEP=5;var WHEEL_TIMEOUT_MS=200;var CLIP_BORDER=3;var Viewport=function(_EventEmitter){_inherits(Viewport,_EventEmitter);function Viewport(presentation,editMode){var _this;_classCallCheck(this,Viewport);_this=_possibleConstructorReturn(this,_getPrototypeOf(Viewport).call(this));_this.presentation=presentation;_this.editMode=!!editMode;_this.cameras=[];_this.mouseDragX=0;_this.mouseDragY=0;_this.dragMode="translate";_this.clipMode={cameras:[],operation:"select"};_this.showHiddenElements=false;_this.wheelTimeout=null;_this.dragHandler=function(evt){return _this.onDrag(evt)};_this.dragEndHandler=function(evt){return _this.onDragEnd(evt)};return _this}_createClass(Viewport,[{key:"makeUniqueId",value:function makeUniqueId(prefix){var suffix=Math.floor(1e3*(1+9*Math.random()));var id;do{id=prefix+suffix;suffix++}while(this.svgRoot.getElementById(id));return id}},{key:"onLoad",value:function onLoad(){var _this2=this;this.svgRoot.addEventListener("mousedown",function(evt){return _this2.onMouseDown(evt)},false);this.svgRoot.addEventListener("mousemove",function(evt){return _this2.onMouseMove(evt)},false);this.svgRoot.addEventListener("contextmenu",function(evt){return _this2.onContextMenu(evt)},false);var wheelEvent="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";this.svgRoot.addEventListener(wheelEvent,function(evt){return _this2.onWheel(evt)},false);this.cameras=this.presentation.layers.map(function(layer){return new _Camera.Camera(_this2,layer)})}},{key:"getLayer",value:function getLayer(nodeId){return this.layers.filter(function(layer){return layer.nodeId===nodeId})[0]}},{key:"onContextMenu",value:function onContextMenu(evt){evt.stopPropagation();evt.preventDefault();this.emit("click",2,evt)}},{key:"onMouseMove",value:function onMouseMove(evt){if(this.dragMode==="clip"){switch(this.getClipMode(evt).operation){case"select":this.svgRoot.style.cursor="crosshair";break;case"n":case"s":this.svgRoot.style.cursor="ns-resize";break;case"w":case"e":this.svgRoot.style.cursor="ew-resize";break;case"nw":case"se":this.svgRoot.style.cursor="nwse-resize";break;case"ne":case"sw":this.svgRoot.style.cursor="nesw-resize";break;case"move":this.svgRoot.style.cursor="move";break;default:this.svgRoot.style.cursor="default"}}else{this.svgRoot.style.cursor="default"}}},{key:"onMouseDown",value:function onMouseDown(evt){evt.stopPropagation();evt.preventDefault();if(evt.button===DRAG_BUTTON){this.mouseDragged=false;this.mouseDragChangedState=false;this.mouseDragX=this.mouseDragStartX=evt.clientX;this.mouseDragY=this.mouseDragStartY=evt.clientY;document.documentElement.addEventListener("mousemove",this.dragHandler,false);document.documentElement.addEventListener("mouseup",this.dragEndHandler,false);if(this.dragMode==="clip"){this.clipMode=this.getClipMode(evt)}}this.emit("mouseDown",evt.button)}},{key:"getClipMode",value:function getClipMode(evt){var x=evt.clientX-this.x;var y=evt.clientY-this.y;var camerasByOperation={nw:[],sw:[],ne:[],se:[],w:[],e:[],n:[],s:[],move:[]};var selectedCameras=this.cameras.filter(function(camera){return camera.selected});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=selectedCameras[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var camera=_step.value;var rect=camera.clipRect;if(x>=rect.x-CLIP_BORDER&&x<=rect.x+rect.width+CLIP_BORDER&&y>=rect.y-CLIP_BORDER&&y<=rect.y+rect.height+CLIP_BORDER){var w=x<=rect.x+CLIP_BORDER;var e=x>=rect.x+rect.width-CLIP_BORDER-1;var n=y<=rect.y+CLIP_BORDER;var s=y>=rect.y+rect.height-CLIP_BORDER-1;var _operation=w||e||n||s?(n?"n":s?"s":"")+(w?"w":e?"e":""):"move";camerasByOperation[_operation].push(camera)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}for(var operation in camerasByOperation){if(camerasByOperation[operation].length){return{cameras:camerasByOperation[operation],operation:operation}}}return{cameras:selectedCameras,operation:"select"}}},{key:"onDrag",value:function onDrag(evt){evt.stopPropagation();var xFromCenter=evt.clientX-this.x-this.width/2;var yFromCenter=evt.clientY-this.y-this.height/2;var angle=180*Math.atan2(yFromCenter,xFromCenter)/Math.PI;var translateX=evt.clientX;var translateY=evt.clientY;var zoom=Math.sqrt(xFromCenter*xFromCenter+yFromCenter*yFromCenter);var deltaX=evt.clientX-this.mouseDragX;var deltaY=evt.clientY-this.mouseDragY;if(!this.mouseDragged&&(Math.abs(deltaX)>DRAG_THRESHOLD_PX||Math.abs(deltaY)>DRAG_THRESHOLD_PX)){this.mouseDragged=true;this.rotateStart=this.rotatePrev=angle;this.translateStartX=this.translateXPrev=translateX;this.translateStartY=this.translateYPrev=translateY;this.zoomPrev=zoom;this.emit("dragStart")}if(this.mouseDragged){var mode=this.dragMode;if(mode=="translate"){if(evt.altKey){mode="scale"}else if(evt.shiftKey){mode="rotate"}}switch(mode){case"scale":if(this.editMode||this.presentation.enableMouseZoom){if(this.zoomPrev!==0){this.zoom(zoom/this.zoomPrev,this.width/2,this.height/2);this.mouseDragChangedState=true}this.zoomPrev=zoom}break;case"rotate":if(this.editMode||this.presentation.enableMouseRotation){if(evt.ctrlKey){angle=10*Math.round((angle-this.rotateStart)/10)+this.rotateStart}this.rotate(this.rotatePrev-angle);this.mouseDragChangedState=true;this.rotatePrev=angle}break;case"clip":switch(this.clipMode.operation){case"select":this.clip(this.mouseDragStartX-this.x,this.mouseDragStartY-this.y,this.mouseDragX-this.x,this.mouseDragY-this.y);break;case"move":this.clipRel(deltaX,deltaY,deltaX,deltaY);break;case"w":this.clipRel(deltaX,0,0,0);break;case"e":this.clipRel(0,0,deltaX,0);break;case"n":this.clipRel(0,deltaY,0,0);break;case"s":this.clipRel(0,0,0,deltaY);break;case"nw":this.clipRel(deltaX,deltaY,0,0);break;case"ne":this.clipRel(0,deltaY,deltaX,0);break;case"sw":this.clipRel(deltaX,0,0,deltaY);break;case"se":this.clipRel(0,0,deltaX,deltaY);break}this.mouseDragChangedState=true;break;default:if(this.editMode||this.presentation.enableMouseTranslation){if(evt.ctrlKey){if(Math.abs(translateX-this.translateStartX)>=Math.abs(translateY-this.translateStartY)){translateY=this.translateStartY}else{translateX=this.translateStartX}}this.translate(translateX-this.translateXPrev,translateY-this.translateYPrev);this.mouseDragChangedState=true;this.translateXPrev=translateX;this.translateYPrev=translateY}}this.mouseDragX=evt.clientX;this.mouseDragY=evt.clientY}}},{key:"onDragEnd",value:function onDragEnd(evt){evt.stopPropagation();evt.preventDefault();if(evt.button===DRAG_BUTTON){if(this.mouseDragged){this.emit("dragEnd");if(this.mouseDragChangedState){this.emit("userChangeState")}}else{this.emit("click",evt.button,evt)}document.documentElement.removeEventListener("mousemove",this.dragHandler,false);document.documentElement.removeEventListener("mouseup",this.dragEndHandler,false)}else{this.emit("click",evt.button,evt)}}},{key:"onWheel",value:function onWheel(evt){var _this3=this;if(this.wheelTimeout!==null){window.clearTimeout(this.wheelTimeout)}evt.stopPropagation();evt.preventDefault();var delta=0;if(evt.wheelDelta){delta=evt.wheelDelta}else if(evt.detail){delta=-evt.detail}else{delta=-evt.deltaY}var changed=false;if(delta!==0){if(evt.shiftKey){if(this.editMode||this.presentation.enableMouseRotation){this.rotate(delta>0?ROTATE_STEP:-ROTATE_STEP);changed=true}}else{if(this.editMode||this.presentation.enableMouseZoom){this.zoom(delta>0?SCALE_FACTOR:1/SCALE_FACTOR,evt.clientX-this.x,evt.clientY-this.y);changed=true}}}if(changed){this.wheelTimeout=window.setTimeout(function(){_this3.wheelTimeout=null;_this3.emit("userChangeState")},WHEEL_TIMEOUT_MS)}}},{key:"repaint",value:function repaint(){this.svgRoot.setAttribute("width",this.width);this.svgRoot.setAttribute("height",this.height);this.update();var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.presentation.elementsToHide[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var id=_step2.value;var elt=document.getElementById(id);if(elt){elt.style.visibility=this.showHiddenElements?"visible":"hidden"}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}},{key:"update",value:function update(){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.cameras[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var camera=_step3.value;camera.update()}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}},{key:"setAtStates",value:function setAtStates(states){var _this4=this;states.forEach(function(state,index){_this4.cameras[index].copy(state)})}},{key:"translate",value:function translate(deltaX,deltaY){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.cameras[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var camera=_step4.value;if(camera.selected){camera.translate(deltaX,deltaY)}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}},{key:"zoom",value:function zoom(factor,x,y){var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=this.cameras[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var camera=_step5.value;if(camera.selected){camera.zoom(factor,x,y)}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]()}}finally{if(_didIteratorError5){throw _iteratorError5}}}}},{key:"rotate",value:function rotate(angle){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=this.cameras[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var camera=_step6.value;if(camera.selected){camera.rotate(angle)}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6["return"]!=null){_iterator6["return"]()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}},{key:"clip",value:function clip(x0,y0,x1,y1){var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=this.clipMode.cameras[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var camera=_step7.value;camera.clip(x0,y0,x1,y1)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7["return"]!=null){_iterator7["return"]()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}},{key:"clipRel",value:function clipRel(w,n,e,s){var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=this.clipMode.cameras[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var camera=_step8.value;var rect=camera.clipRect;if(w<=rect.width+e-1&&n<=rect.height+s-1){camera.clip(rect.x+w,rect.y+n,rect.x+rect.width+e-1,rect.y+rect.height+s-1)}}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8["return"]!=null){_iterator8["return"]()}}finally{if(_didIteratorError8){throw _iteratorError8}}}}},{key:"ready",get:function get(){return!!(this.presentation.document&&this.presentation.document.root)}},{key:"svgRoot",get:function get(){return this.presentation.document.root}},{key:"x",get:function get(){return this.svgRoot.getScreenCTM().e}},{key:"y",get:function get(){return this.svgRoot.getScreenCTM().f}},{key:"width",get:function get(){return this.svgRoot===document.documentElement?window.innerWidth:this.svgRoot.parentNode.clientWidth}},{key:"height",get:function get(){return this.svgRoot===document.documentElement?window.innerHeight:this.svgRoot.parentNode.clientHeight}}]);return Viewport}(_events.EventEmitter);exports.Viewport=Viewport},{"./Camera":5,events:14}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.addSVGHandler=addSVGHandler;exports.SVGDocumentWrapper=exports.DefaultSVGHandler=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SVG_NS="http://www.w3.org/2000/svg";var DRAWABLE_TAGS=["g","image","path","rect","circle","ellipse","line","polyline","polygon","text","clippath"];var handlers={};function addSVGHandler(name,handler){handlers[name]=handler}var DefaultSVGHandler=function(){function DefaultSVGHandler(){_classCallCheck(this,DefaultSVGHandler)}_createClass(DefaultSVGHandler,null,[{key:"matches",value:function matches(svgRoot){return true}},{key:"transform",value:function transform(svgRoot){}},{key:"isLayer",value:function isLayer(svgElement){return true}},{key:"getLabel",value:function getLabel(svgElement){return null}}]);return DefaultSVGHandler}();exports.DefaultSVGHandler=DefaultSVGHandler;var SVGDocumentWrapper=function(){function SVGDocumentWrapper(svgRoot){_classCallCheck(this,SVGDocumentWrapper);this.asText="";this.handler=DefaultSVGHandler;this.root=svgRoot;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.root.getElementsByTagName("a")[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var link=_step.value;link.addEventListener("mousedown",function(evt){return evt.stopPropagation()},false)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}}_createClass(SVGDocumentWrapper,[{key:"isLayer",value:function isLayer(svgNode){return svgNode instanceof SVGGElement&&svgNode.hasAttribute("id")&&this.handler.isLayer(svgNode)}},{key:"removeViewbox",value:function removeViewbox(){this.root.removeAttribute("viewBox");this.root.style.width=this.root.style.height="100%"}},{key:"removeScripts",value:function removeScripts(){var scripts=Array.from(this.root.getElementsByTagName("script"));for(var _i=0,_scripts=scripts;_i<_scripts.length;_i++){var script=_scripts[_i];script.parentNode.removeChild(script)}}},{key:"disableHyperlinks",value:function disableHyperlinks(){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.root.getElementsByTagName("a")[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var link=_step2.value;link.addEventListener("click",function(evt){return evt.preventDefault()},false)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}},{key:"isValidSVG",get:function get(){return this.root instanceof SVGSVGElement}}],[{key:"fromString",value:function fromString(data){var svgRoot=(new DOMParser).parseFromString(data,"image/svg+xml").documentElement;var doc=new SVGDocumentWrapper(svgRoot);for(var name in handlers){if(handlers[name].matches(svgRoot)){console.log("Using handler: ".concat(name));doc.handler=handlers[name];break}}if(doc.isValidSVG){doc.handler.transform(svgRoot);doc.removeViewbox();doc.removeScripts();doc.disableHyperlinks();var AiHandler=handlers["Adobe Illustrator"];if(doc.handler!==AiHandler){AiHandler.transform(svgRoot)}var svgWrapper=document.createElementNS(SVG_NS,"g");for(var _i2=0,_Array$from=Array.from(svgRoot.childNodes);_i2<_Array$from.length;_i2++){var svgNode=_Array$from[_i2];if(svgNode.tagName===undefined){svgRoot.removeChild(svgNode)}else if(DRAWABLE_TAGS.indexOf(svgNode.localName)>=0){if(!doc.isLayer(svgNode)){svgWrapper.appendChild(svgNode)}else if(svgWrapper.firstChild){svgRoot.insertBefore(svgWrapper,svgNode);svgWrapper=document.createElementNS(SVG_NS,"g")}}}if(svgWrapper.firstChild){svgRoot.appendChild(svgWrapper)}}doc.asText=(new XMLSerializer).serializeToString(svgRoot);return doc}}]);return SVGDocumentWrapper}();exports.SVGDocumentWrapper=SVGDocumentWrapper},{}],14:[function(require,module,exports){var objectCreate=Object.create||objectCreatePolyfill;var objectKeys=Object.keys||objectKeysPolyfill;var bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){if(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events")){this._events=objectCreate(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;var hasDefineProperty;try{var o={};if(Object.defineProperty)Object.defineProperty(o,"x",{value:0});hasDefineProperty=o.x===0}catch(err){hasDefineProperty=false}if(hasDefineProperty){Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||arg!==arg)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=arg}})}else{EventEmitter.defaultMaxListeners=defaultMaxListeners}EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};function emitNone(handler,isFn,self){if(isFn)handler.call(self);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self)}}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1)}}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2)}}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3)}}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].apply(self,args)}}EventEmitter.prototype.emit=function emit(type){var er,handler,len,args,i,events;var doError=type==="error";events=this._events;if(events)doError=doError&&events.error==null;else if(!doError)return false;if(doError){if(arguments.length>1)er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Unhandled "error" event. ('+er+")");err.context=er;throw err}return false}handler=events[type];if(!handler)return false;var isFn=typeof handler==="function";len=arguments.length;switch(len){case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];emitMany(handler,isFn,this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');events=target._events;if(!events){events=target._events=objectCreate(null);target._eventsCount=0}else{if(events.newListener){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(!existing){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else{if(prepend){existing.unshift(listener)}else{existing.push(listener)}}if(!existing.warned){m=$getMaxListeners(target);if(m&&m>0&&existing.length>m){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+' "'+String(type)+'" listeners '+"added. Use emitter.setMaxListeners() to "+"increase limit.");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;if(typeof console==="object"&&console.warn){console.warn("%s: %s",w.name,w.message)}}}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;switch(arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:var args=new Array(arguments.length);for(var i=0;i<args.length;++i)args[i]=arguments[i];this.listener.apply(this.target,args)}}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=bind.call(onceWrapper,state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');events=this._events;if(!events)return this;list=events[type];if(!list)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=objectCreate(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else spliceOne(list,position);if(list.length===1)events[type]=list[0];if(events.removeListener)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(!events)return this;if(!events.removeListener){if(arguments.length===0){this._events=objectCreate(null);this._eventsCount=0}else if(events[type]){if(--this._eventsCount===0)this._events=objectCreate(null);else delete events[type]}return this}if(arguments.length===0){var keys=objectKeys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=objectCreate(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(!events)return[];var evlistener=events[type];if(!evlistener)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function objectCreatePolyfill(proto){var F=function(){};F.prototype=proto;return new F}function objectKeysPolyfill(obj){var keys=[];for(var k in obj)if(Object.prototype.hasOwnProperty.call(obj,k)){keys.push(k)}return k}function functionBindPolyfill(context){var fn=this;return function(){return fn.apply(context,arguments)}}},{}]},{},[3]);</script>
    </body>
</html>
